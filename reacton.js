(()=>{"use strict";const e=[],t=new Set,n=new WeakMap,s=Function("return function*(){}")().constructor,a=/\.html?$/,o={get:(e,t,n)=>e.$data.hasOwnProperty(t)?Reflect.get(e.$data,t,n):Reflect.get(e,t)};function i(e){const t=new XMLHttpRequest;return t.open("GET",e),t.send(),new Promise((e=>t.onload=()=>{const n=document.createElement("template");n.innerHTML=t.response,e(Reacton(...n.content.children))}))}async function r(e){const t=e.content||e,n=[...t.querySelectorAll("script")].map((e=>t.removeChild(e).innerHTML)).join(""),s=Function(`var exports\n${n}\nreturn exports`)(),a=e.innerHTML,o={};for(const t in e.dataset)o[t]=e.dataset[t];return Object.assign({name:e.getAttribute("name")||e.nodeName.toLowerCase(),mode:e.getAttribute("mode")||void 0,extends:e.getAttribute("extends")||void 0,dataset:o,html:a},s)}function*l(e,t){const n=e.childNodes.length;for(;;){const a=e.parent;if(a.childNodes[e.index])for(var s=0;s<n;s++)c.call(this,a.childNodes[e.index+s],e.childNodes[s]);else a.append(p.call(this,e.cloneNode(!0),e,t));e.index+=n,yield}}function c(e,t){if(e.nodeValue)e.nodeName.startsWith("data--on")?d.call(this,e):n.get(this).callbacks.has(t)&&(e.nodeName.startsWith("data--")?d.call(this,e,t):e.nodeValue=n.get(this).callbacks.get(t)());else{if(e.attributes){for(var s=0;s<e.attributes.length;s++)c.call(this,e.attributes[s],t.attributes[s]);if(e.attributes["data--for"])return e}for(s=0;s<e.childNodes.length;s++)c.call(this,e.childNodes[s],t.childNodes[s])}}function d(e,t){const s=n.get(this).callbacks.get(t||e);if("data--for"===e.nodeName){if(n.get(this).iterator!==s.iterator){const t=n.get(this).iterator,{environment:o,iterator:i,fragment:r}=s,l=e.ownerElement;n.get(this).iterator=i,r.parent=l,r.index=0,o.next();for(var a=l.childNodes.length;a>r.index;a--)l.lastChild.remove();n.get(this).iterator=t}}else if(e.nodeName.startsWith("data--on")){let{name:t,closure:a,opts:o}=s;e.ownerElement.removeEventListener(t,n.get(this).listeners.get(e),o);const i=a();n.get(this).listeners.set(e,i),e.ownerElement.addEventListener(t,i,o)}else if("data--view"===e.nodeName){const t=s();if(t){const{name:n=t,content:s=""}=t,o=e.ownerElement;o.removeAttribute("is");const i=o.nodeName,r=document.createElement("template");r.innerHTML=`<${i} is="${n}">${s}</${i}>`;const l=r.content.firstChild;for(a=0;a<o.attributes.length;a++)l.setAttributeNode(o.removeAttributeNode(o.attributes[a--]));o.$params&&(l.$params=o.$params),o.replaceWith(l)}}else e.nodeName.startsWith("data--")?s()?e.ownerElement.setAttribute(e.nodeName.slice(6),""):e.ownerElement.removeAttribute(e.nodeName.slice(6)):e.nodeValue=s()}window.Reacton=async function l(...c){return e.splice(0),c.forEach((c=>e.push(new Promise((async e=>{if(c instanceof HTMLElement)c=await r(c);else if("string"==typeof c){if(a.test(c)){const t=await i(c);return e(t)}const t=document.createElement("template");t.innerHTML=c.trim(),c=await r(t.content.removeChild(t.content.firstChild))}const{name:d,data:h,dataset:u,html:f="",mode:m,extends:w="",connected:v,disconnected:b,adopted:N,attributes:E,changed:x,before:T,after:A}=c,C=document.createElement("template");C.innerHTML=f,g(C.content);class k extends(window[`HTML${w.charAt(0).toUpperCase()+w.slice(1)}Element`]||HTMLElement){#e;constructor(){super(),this.$data={},this.$host=this,n.set(this,{}),n.get(this).nodes=[],n.get(this).values=new WeakMap,n.get(this).depends=new WeakMap,n.get(this).handlers=new WeakMap,n.get(this).listeners=new WeakMap,n.get(this).callbacks=new WeakMap,l.hasOwnProperty("mixins")&&(this.$mixins=l.mixins);for(const e in u)this.dataset[e]=u[e];"function"==typeof T&&(n.get(this).before=T),"function"==typeof A&&(n.get(this).after=A),t.add(d.toUpperCase())}get $root(){return this.shadowRoot}async connectedCallback(){let t=!1;"function"==typeof h&&(this.$data=$.call(this,Object.assign(this.$data,await h.call(this)),y.call(this)),t=!0),n.get(this).iterator=s("{$data,$root,$host,$,$$,$when,$mixins,$params,$event,$router}=this","with(this.$data)while(true)arguments[0]=yield eval(arguments[0])").call(new Proxy(this,o)),n.get(this).iterator.next(),this.#e=p.call(this,C.content.cloneNode(!0)),"function"==typeof v&&await v.call(this);const a=m?this.attachShadow({mode:m}):this;a.append(this.#e),this.#e=a,t||delete this.$data,e(this)}async disconnectedCallback(){"function"==typeof b&&await b.call(this)}async adoptedCallback(){"function"==typeof N&&await N.call(this)}static get observedAttributes(){if(Array.isArray(E))return E}async attributeChangedCallback(...e){"function"==typeof x&&await x.call(this,...e)}$(e){return"closed"!==m?this.#e.querySelector(e):null}$$(e){return"closed"!==m?this.#e.querySelectorAll(e):null}$event(e,t){this.dispatchEvent(new CustomEvent(e,t))}$when(e){return customElements.whenDefined(e)}$router(...e){L.call(this,...e)}}customElements.define(d,k,w?{extends:w}:null),setTimeout((()=>customElements.whenDefined(d).then((()=>t.has(d.toUpperCase())?null:e()))),0)}))))),(await Promise.all(e)).flat().filter(Boolean)};const h=/{{([^]*?)}}/,u=/;|\bof\b|\bin\b/,f=/\b[A-Za-z_]\w*?\b/g;function m(e,t,s){"object"==typeof s?n.get(this).callbacks.set(t||e,s):n.get(this).callbacks.set(t||e,n.get(this).iterator.next(`event=>${s}`).value),n.get(this).nodes.push(e),d.call(this,e,t),n.get(this).nodes.pop()}function p(e,t,s){if(e.nodeName.startsWith("data--for")){const s=new DocumentFragment;for(;e.ownerElement.firstChild;)s.append(e.ownerElement.firstChild);const a=n.get(this).iterator.next(`(function*(){arguments[0]=yield function*(){while(true)arguments[0]=yield eval(arguments[0])};while(true){yield;for(var ${e.value})arguments[0].next()}})`).value(),o=a.next().value.call(this.$data);o.next(),a.next(l.call(this,s,e.nodeValue.split(u)[0].match(f).join())),m.call(this,e,t,{environment:a,iterator:o,fragment:s})}else if(e.nodeName.startsWith("data--on")){const t=e.nodeName.split("."),a=t.shift().slice(8),o=t.reduce(((e,t)=>(e[t]=!0,e)),{});if(s){const t=n.get(this).iterator.next(`()=>((${s})=>event=>${e.nodeValue})(${s})`).value;n.get(this).callbacks.set(e,{name:a,closure:t,opts:o}),d.call(this,e)}else{const t=n.get(this).iterator.next(`event=>${e.nodeValue}`).value;e.ownerElement.addEventListener(a,t,o)}}else if(e.nodeName.startsWith("data--"))m.call(this,e,t,e.nodeValue);else if(e.nodeValue)e.nodeValue.replace(h,((n,s)=>m.call(this,e,t,s)));else{if(e.attributes){for(var a=0;a<e.attributes.length;a++)p.call(this,e.attributes[a],t?t.attributes[a]:null,s);if(e.attributes["data--for"])return e}for(a=0;a<e.childNodes.length;a++)p.call(this,e.childNodes[a],t?t.childNodes[a]:null,s)}return e}function g(e){if(8===e.nodeType||3===e.nodeType&&!e.data.trim())return e.remove();if("$"===e.nodeName[0]||"@"===e.nodeName[0]){const t=document.createAttribute(`data--${"@"===e.nodeName[0]?"on":""}${e.nodeName.slice(1)}`);return t.value=e.value,e.ownerElement.setAttributeNode(t),e.ownerElement.removeAttribute(e.nodeName)}if(3===e.nodeType)e.data.replace(h,((t,n,s)=>{s>0?e.splitText(s):e.splitText(s+t.length)}));else{if(e.attributes)for(var t=0;t<e.attributes.length;t++)g(e.attributes[t])||t--;for(t=0;t<e.childNodes.length;t++)g(e.childNodes[t])||t--}return e}const w=new Set(["push","pop","shift","unshift","splice","sort","reverse"]);function v(e){for(var t of(n.get(this).before&&n.get(this).before(),e))d.call(this,t);n.get(this).after&&n.get(this).after()}class b{#t;#n;#s;#a;constructor(e,t,s){this.#t=e,this.#n=t,this.#s=s,this.#a=n.get(this.#t)}apply(e,t,n){return"toString"===e.name?JSON.stringify(t,null," "):(e.apply(this.#s,n),v.call(this.#t,this.#n),t)}get(e,t,n){const s=Reflect.get(e,t,n);if(this.#a.values.has(s))return this.#a.values.get(s);if(Array.isArray(e)&&w.has(t)||"toString"===t){if(this.#a.handlers.has(e))return new Proxy(s,this.#a.handlers.get(e));const t=y.call(this.#t,this.#n,e);return this.#a.handlers.set(e,t),new Proxy(s,t)}if(!e.hasOwnProperty(t))return s;if(this.#a.nodes.length){const n=this.#a.nodes[0];this.#n&&this.#n.add(n);let s=this.#a.depends.get(e);s||(s={},this.#a.depends.set(e,s));var a=s[t];a||(a=s[t]=new Set),a.add(n)}return s&&"object"==typeof s?$.call(this.#t,s,y.call(this.#t,a)):s}set(e,t,n,s){if(Reflect.get(e,t,s)===n)return!0;if(!Reflect.set(e,t,n,s))return!1;const a=this.#a.depends.get(e);if(!a)return!0;const o=a[t]||this.#n;return o&&v.call(this.#t,o),!0}}function y(e,t){return new b(this,e,t)}function $(e,t){const s=new Proxy(e,t);return n.get(this).values.set(e,s),s}function N(e,t,n,s=0){if("STYLE"===t.nodeName)return!1;if(t.shadowRoot){const n=N.document.createElement(t.nodeName);for(const e of t.attributes)n.setAttribute(e.name,e.value);e.append(n)}else e.content?e.content.append(t.cloneNode()):(e.append(t.cloneNode()),"SLOT"===e.lastChild.nodeName&&n.add(e.lastChild));const a=(e.content||e).childNodes[s],o="SLOT"===t.nodeName?t.assignedNodes({flatten:!0}):(t.shadowRoot||t.content||t).childNodes||t;for(var i=0,r=0;i<o.length;i++,r++)N(a,o[i],n,r)||r--;return!0}Reacton.render=async function(t=document.children[0]){await Promise.all(e);const n=document.createElement("template");N.document||(N.document=document.implementation.createHTMLDocument());const s=new Set;return N(n.content,t,s),s.forEach((e=>e.replaceWith(...e.childNodes))),t===document.children[0]?`<!DOCTYPE html>\n${n.innerHTML}`:n.innerHTML};const E=/:(\w+)/g;function x(e,t,n,s,a,o){const i=location.href.replace(location.origin,"");Object.keys(t).forEach((r=>{const l=t[r].exec(i);if(l){const t=new CustomEvent(r,{bubbles:n,cancelable:s,composed:a,detail:o});t.url=new URL(location.href),t.params=l.groups,e.dispatchEvent(t)}}))}function L(e,t,n={}){const{once:s,capture:a,passive:o,bubbles:i,cancelable:r,composed:l,detail:c}=n,d={};for(const n in t)e.addEventListener(n,t[n],{once:s,capture:a,passive:o}),d[n]=new RegExp(`^${n.replace(E,((e,t)=>`(?<${t}>\\w+)`))}/?$`);window.addEventListener("popstate",(()=>{x(e,d,i,r,l,c)}),{once:s,capture:a,passive:o}),e.addEventListener("click",(t=>{const n=t.composedPath()[0],s=n.getAttribute("href");s&&n.origin===location.origin&&!/\.\w+$/.test(s)&&(t.preventDefault(),history.pushState(null,"",s),x(e,d,i,r,l,c))}),{once:s,capture:a,passive:o}),x(e,d,i,r,l,c)}})();