(()=>{"use strict";const e=[],t=new WeakMap,n=new WeakMap,s=new Set,a=Function("return function*(){}")().constructor,o=/\.html?$/,i={get:(e,t,n)=>e.$data.hasOwnProperty(t)?Reflect.get(e.$data,t,n):Reflect.get(e,t)};function r(e){const t=new XMLHttpRequest;return t.open("GET",e),t.send(),new Promise((e=>t.onload=()=>{const n=document.createElement("template");n.innerHTML=t.response,e(Reacton(...n.content.children))}))}async function l(e){const t=e.content||e,n=[...t.querySelectorAll("script")].map((e=>t.removeChild(e).innerHTML)).join(""),s=Function(`var exports\n${n}\nreturn exports`)(),a=e.innerHTML,o={};for(const t in e.dataset)o[t]=e.dataset[t];return Object.assign({name:e.getAttribute("name")||e.nodeName.toLowerCase(),mode:e.getAttribute("mode")||void 0,extends:e.getAttribute("extends")||void 0,dataset:o,html:a},s)}function*c(e,t){const n=e.childNodes.length;for(;;){const a=e.parent;if(a.childNodes[e.index])for(var s=0;s<n;s++)d.call(this,a.childNodes[e.index+s],e.childNodes[s]);else a.append(b.call(this,e.cloneNode(!0),e,t));e.index+=n,yield}}function d(e,n){if(e.nodeValue)e.nodeName.startsWith("data--on")?h.call(this,e):t.get(this).callbacks.has(n)&&(e.nodeName.startsWith("data--")?h.call(this,e,n):e.nodeValue=t.get(this).callbacks.get(n)());else{if(e.attributes){for(var s=0;s<e.attributes.length;s++)d.call(this,e.attributes[s],n.attributes[s]);if(e.attributes["data--for"])return e}for(s=0;s<e.childNodes.length;s++)d.call(this,e.childNodes[s],n.childNodes[s])}}function h(e,n){const s=t.get(this).callbacks.get(n||e);if("data--for"===e.nodeName){if(t.get(this).iterator!==s.iterator){const n=t.get(this).iterator,{environment:o,iterator:i,fragment:r}=s,l=e.ownerElement;t.get(this).iterator=i,r.parent=l,r.index=0,o.next();for(var a=l.childNodes.length;a>r.index;a--)l.lastChild.remove();t.get(this).iterator=n}}else if(e.nodeName.startsWith("data--on")){let{name:n,closure:a,opts:o}=s;e.ownerElement.removeEventListener(n,t.get(this).listeners.get(e),o);const i=a();t.get(this).listeners.set(e,i),e.ownerElement.addEventListener(n,i,o)}else if("data--view"===e.nodeName){const t=s();if(t){const{name:n=t,content:s=""}=t,o=e.ownerElement;o.removeAttribute("is");const i=o.nodeName,r=document.createElement("template");r.innerHTML=`<${i} is="${n}">${s}</${i}>`;const l=r.content.firstChild;for(a=0;a<o.attributes.length;a++)l.setAttributeNode(o.removeAttributeNode(o.attributes[a--]));o.replaceWith(l)}}else e.nodeName.startsWith("data--")?s()?e.ownerElement.setAttribute(e.nodeName.slice(6),""):e.ownerElement.removeAttribute(e.nodeName.slice(6)):e.nodeValue=s()}window.Reacton=async function c(...d){return e.splice(0),d.forEach((d=>e.push(new Promise((async e=>{if(d instanceof HTMLElement)d=await l(d);else if("string"==typeof d){if(o.test(d)){const t=await r(d);return e(t)}const t=document.createElement("template");t.innerHTML=d.trim(),d=await l(t.content.removeChild(t.content.firstChild))}const{name:h,data:u,dataset:f,html:m="",mode:p,extends:g="",connected:w,disconnected:y,adopted:$,attributes:x,changed:k,before:L,after:A}=d,C=g?Object.getPrototypeOf(document.createElement(g)).constructor:HTMLElement,M=document.createElement("template");M.innerHTML=m,v(M.content),customElements.define(h,class extends C{#e;constructor(){super(),this.$data={},this.$host=this;const e={};if(e.values=new WeakMap,e.depends=new WeakMap,e.handlers=new WeakMap,e.listeners=new WeakMap,this.dataset.Params){const t=n.get(this.attributes["data--params"]);this.$params=t.proxy,e.nodes=t.nodes,e.callbacks=t.callbacks}else e.nodes=[],e.callbacks=new WeakMap;c.hasOwnProperty("mixins")&&(this.$mixins=c.mixins);for(const e in f)this.dataset[e]=f[e];"function"==typeof L&&(e.before=L),"function"==typeof A&&(e.after=A),t.set(this,e),s.add(h.toUpperCase())}get $root(){return this.shadowRoot}async connectedCallback(){let n=!1;"function"==typeof u&&(this.$data=E.call(this,Object.assign(this.$data,await u.call(this)),N.call(this)),n=!0),t.get(this).iterator=a("{$data,$root,$host,$,$$,$when,$mixins,$params,$event,$router}=this","with(this.$data)while(true)arguments[0]=yield eval(arguments[0])").call(new Proxy(this,i)),t.get(this).iterator.next(),this.#e=b.call(this,M.content.cloneNode(!0)),"function"==typeof w&&await w.call(this);const s=p?this.attachShadow({mode:p}):this;s.append(this.#e),this.#e=s,n||delete this.$data,e(this)}async disconnectedCallback(){"function"==typeof y&&await y.call(this)}async adoptedCallback(){"function"==typeof $&&await $.call(this)}static get observedAttributes(){if(Array.isArray(x))return x}async attributeChangedCallback(...e){"function"==typeof k&&await k.call(this,...e)}$(e){return"closed"!==p?this.#e.querySelector(e):null}$$(e){return"closed"!==p?this.#e.querySelectorAll(e):null}$event(e,t){(this||document).dispatchEvent(new CustomEvent(e,t))}$when(e){return customElements.whenDefined(e)}$router(...e){T.call(this,...e)}},g?{extends:g}:null),setTimeout((()=>customElements.whenDefined(h).then((()=>s.has(h.toUpperCase())?null:e()))),0)}))))),(await Promise.all(e)).flat().filter(Boolean)};const u=/{{([^{}]*?)}}/g,f=/(\\*?)`/g,m=/;|\bof\b|\bin\b/,p=/\b[A-Za-z_]\w*?\b/g;function g(e,n,s){"object"==typeof s?t.get(this).callbacks.set(n||e,s):t.get(this).callbacks.set(n||e,t.get(this).iterator.next(`event=>${s}`).value),t.get(this).nodes.push(e),h.call(this,e,n),t.get(this).nodes.pop()}function b(e,s,a){if(e.nodeName.startsWith("data--for")){const n=new DocumentFragment;for(;e.ownerElement.firstChild;)n.append(e.ownerElement.firstChild);const a=t.get(this).iterator.next(`(function*(){arguments[0]=yield function*(){while(true)arguments[0]=yield eval(arguments[0])};while(true){yield;for(var ${e.value})arguments[0].next()}})`).value(),o=a.next().value.call(this.$data);o.next(),a.next(c.call(this,n,e.nodeValue.split(m)[0].match(p).join())),g.call(this,e,s,{environment:a,iterator:o,fragment:n})}else if(e.nodeName.startsWith("data--on")){const n=e.nodeName.split("."),s=n.shift().slice(8),o=n.reduce(((e,t)=>(e[t]=!0,e)),{});if(a){const n=t.get(this).iterator.next(`()=>((${a})=>event=>${e.nodeValue})(${a})`).value;t.get(this).callbacks.set(e,{name:s,closure:n,opts:o}),h.call(this,e)}else{const n=t.get(this).iterator.next(`event=>${e.nodeValue}`).value;e.ownerElement.addEventListener(s,n,o)}}else if(e.nodeName.startsWith("data--params")){const s=new Set;for(let t of e.value.split(","))s.add(t.trim());n.set(e,{proxy:new Proxy(this.$data,{get:(e,t,n)=>s.has(t)?Reflect.get(e,t,n):void 0,set:(e,t,n,a)=>!!s.has(t)&&Reflect.set(e,t,n,a)}),nodes:t.get(this).nodes,callbacks:t.get(this).callbacks})}else if(e.nodeName.startsWith("data--"))g.call(this,e,s,e.nodeValue);else if(e.nodeValue&&u.test(e.nodeValue))if(2===e.nodeType){const t=e.value.replace(f,((e,t)=>t.length%2?e:`\\${e}`)).replace(u,((e,t)=>`\${${t}}`));g.call(this,e,s,`\`${t}\``)}else 3===e.nodeType&&g.call(this,e,s,e.data.replace(u,((e,t)=>t)));else{if(e.attributes){for(var o=0;o<e.attributes.length;o++)b.call(this,e.attributes[o],s?s.attributes[o]:null,a);if(e.attributes["data--for"])return e}for(o=0;o<e.childNodes.length;o++)b.call(this,e.childNodes[o],s?s.childNodes[o]:null,a)}return e}function v(e){if(8===e.nodeType||3===e.nodeType&&!e.data.trim())return e.remove();if("$"===e.nodeName[0]||"@"===e.nodeName[0]){const t=document.createAttribute(`data--${"@"===e.nodeName[0]?"on":""}${e.nodeName.slice(1)}`);return t.value=e.value,e.ownerElement.setAttributeNode(t),e.ownerElement.removeAttribute(e.nodeName)}if(3===e.nodeType){const t=u.exec(e.data);t&&e.splitText(t.index||t[0].length),u.lastIndex=0}else{if(e.attributes)for(var t=0;t<e.attributes.length;t++)v(e.attributes[t])||t--;for(t=0;t<e.childNodes.length;t++)v(e.childNodes[t])||t--}return e}const w=new Set(["push","pop","shift","unshift","splice","sort","reverse"]);function y(e){for(var n of(t.get(this).before&&t.get(this).before(),e))h.call(this,n);t.get(this).after&&t.get(this).after()}class ${#t;#n;#s;#a;constructor(e,n,s){this.#t=e,this.#n=n,this.#s=s,this.#a=t.get(this.#t)}apply(e,t,n){return"toString"===e.name?JSON.stringify(t,null," "):(e.apply(this.#s,n),this.#n&&y.call(this.#t,this.#n),t)}get(e,t,n){const s=Reflect.get(e,t,n);if(this.#a.values.has(s))return this.#a.values.get(s);if(Array.isArray(e)&&w.has(t)||"toString"===t){if(this.#a.handlers.has(e))return new Proxy(s,this.#a.handlers.get(e));const t=N.call(this.#t,this.#n,e);return this.#a.handlers.set(e,t),new Proxy(s,t)}if(!e.hasOwnProperty(t))return s;if(this.#a.nodes.length){const n=this.#a.nodes[0];this.#n&&this.#n.add(n);let s=this.#a.depends.get(e);s||(s={},this.#a.depends.set(e,s));var a=s[t];a||(a=s[t]=new Set),a.add(n)}return s&&"object"==typeof s?E.call(this.#t,s,N.call(this.#t,a)):s}set(e,t,n,s){if(!Reflect.set(e,t,n,s))return!1;const a=this.#a.depends.get(e);if(!a)return!0;const o=a[t]||this.#n;return o&&y.call(this.#t,o),!0}}function N(e,t){return new $(this,e,t)}function E(e,n){const s=new Proxy(e,n);return t.get(this).values.set(e,s),s}function x(e,t,n,s=0){if("STYLE"===t.nodeName)return!1;if(t.shadowRoot){const n=x.document.createElement(t.nodeName);for(const e of t.attributes)n.setAttribute(e.name,e.value);e.append(n)}else e.content?e.content.append(t.cloneNode()):(e.append(t.cloneNode()),"SLOT"===e.lastChild.nodeName&&n.add(e.lastChild));const a=(e.content||e).childNodes[s],o="SLOT"===t.nodeName?t.assignedNodes({flatten:!0}):(t.shadowRoot||t.content||t).childNodes||t;for(var i=0,r=0;i<o.length;i++,r++)x(a,o[i],n,r)||r--;return!0}Reacton.render=async function(t=document.children[0]){await Promise.all(e);const n=document.createElement("template");x.document||(x.document=document.implementation.createHTMLDocument());const s=new Set;return x(n.content,t,s),s.forEach((e=>e.replaceWith(...e.childNodes))),t===document.children[0]?`<!DOCTYPE html>\n${n.innerHTML}`:n.innerHTML};const k=/:(\w+)/g;function L(e,t,n,s,a,o){const i=location.href.replace(location.origin,"");Object.keys(t).forEach((r=>{const l=t[r].exec(i);if(l){const t=new CustomEvent(r,{bubbles:n,cancelable:s,composed:a,detail:o});t.url=new URL(location.href),t.params=l.groups,e.dispatchEvent(t)}}))}function T(e,t,n={}){const{once:s,capture:a,passive:o,bubbles:i,cancelable:r,composed:l,detail:c}=n,d={};for(const n in t)e.addEventListener(n,t[n],{once:s,capture:a,passive:o}),d[n]=new RegExp(`^${n.replace(k,((e,t)=>`(?<${t}>\\w+)`))}/?$`);window.addEventListener("popstate",(()=>{L(e,d,i,r,l,c)}),{once:s,capture:a,passive:o}),e.addEventListener("click",(t=>{const n=t.composedPath()[0],s=n.getAttribute("href");s&&n.origin===location.origin&&!/\.\w+$/.test(s)&&(t.preventDefault(),history.pushState(null,"",s),L(e,d,i,r,l,c))}),{once:s,capture:a,passive:o}),L(e,d,i,r,l,c)}})();