<r-header extends="header" mode="open">
  <!-- меню -->
  <nav is="r-menu">
    содержимое слота
    <b slot="test">тест</b>
    <p>{{ $mixins.print() }}</p>
  </nav>

  <script>
    exports = {
      async connected() {
        // const { routes } = await import('./Events.js')
        const routes = this.$mixins.routes

        // await this.$when('r-main')
        // await new Promise(ok => setTimeout(ok, 1000))

        // console.log(this)

        this.$router(this.$('nav'), {
          '/': () => {
            this.$event(routes, 'path-change', { detail: 'r-home' })
          },
          '/about': () => {
            this.$event(routes, 'path-change', { detail: 'r-about' })
          },
          '/contacts': () => {
            this.$event(routes, 'path-change', { detail: 'r-contacts' })
          }
        }, {
          when: 'r-main',
          // once: true,
          // start: false,
        })

        // await new Promise(ok => setTimeout(ok, 1000))
      }
    }
  </script>
</r-header>


<r-main extends="main" mode="open">
  <section :is="page"></section>

  <style>
    :host {
      display: block;
      margin-top: 50px;
    }
  </style>

  <script>
    exports = {
      data() {
        return {
          page: ''
        }
      },
      async connected() {
        // const { routes } = await import('./Events.js')
        const routes = this.$mixins.routes

        // console.log(this)

        // await new Promise(ok => setTimeout(ok, 1000))

        routes.addEventListener('path-change', event => {
          this.$data.page = event.detail
        })

        // await new Promise(ok => setTimeout(ok, 1000))
      }
    }
  </script>
</r-main>


<r-menu extends="nav" mode="open">
  <slot name="test"></slot>
  <a href="/">Главная</a>
  <a href="/about/">О нас</a>
  <a href="/contacts">Контакты</a>


  <slot></slot>
</r-menu>


<r-home extends="section" mode="open">
  <h2>Главная</h2>

  <script>
    exports = {
      async connected() {
        await new Promise(ok => setTimeout(ok, 1000))
      }
    }
  </script>
</r-home>

<r-about extends="section" mode="open">
  <h2>О нас</h2>
</r-about>

<r-contacts extends="section" mode="open">
  <h2>Контакты</h2>
</r-contacts>