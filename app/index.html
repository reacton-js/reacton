<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reacton</title>
</head>
<body>
  <!-- монтировать компонент Upper -->
  <r-upper id="upper"></r-upper>

  <!-- монтировать компонент Lower -->
  <r-lower id="lower"></r-lower>

  <!-- шаблон компонента Upper -->
  <template name="r-upper">
    <h1>{{ name }}</h1>

    <!-- вывести в цикле массив цветов -->
    <ul $for="col of colors">
      <li>{{ col }}</li>
    </ul>

    <script>
      exports = {
        data() {
          return {
            name: 'Upper',
            colors: ['красный', 'зелёный', 'синий']
          }
        },
        async connected() {
          // импортировать елемент события eventReverse
          // const { eventReverse } = await import('./Events.js')

          // получить елемент события eventReverse
          const eventReverse = this.$mixins.eventReverse

          // добавить элементу eventReverse обработчик события "reverse-colors"
          eventReverse.addEventListener('reverse-colors', () => {
            this.colors.reverse() // обратить массив
          })

          // добавить элементу eventReverse обработчик события "new-colors"
          eventReverse.addEventListener('new-colors', event => {
            this.colors = event.detail // новый массив
          })
        }
      }
    </script>
  </template>
  
  <!-- шаблон компонента Lower -->
  <template name="r-lower">
    <h3>{{ name }}</h3>

    <button :onclick="reverseArray()">Обратить массив</button>

    <button :onclick="newArray()">Новый массив</button>

    <script>
      exports = {
        async data() {
          // импортировать елемент события eventReverse
          // const { eventReverse } = await import('./Events.js')

          // получить елемент события eventReverse
          const eventReverse = this.$mixins.eventReverse

          return {
            name: 'Lower',
            reverseArray() {
              // вызвать событие "reverse-colors" для элемента eventReverse
              this.$event(eventReverse, 'reverse-colors')
            },
            newArray() {
              // вызвать событие "new-colors" для элемента eventReverse
              this.$event(eventReverse, 'new-colors', {
                // передать в обработчик события новый массив
                detail: ['синий', 'оранжевый', 'фиолетовый', 'золотой']
              })
            }
          }
        }
      }
    </script>
  </template>
  
  <!-- подключить библиотеку Reacton -->
  <script src="reacton.js"></script>

  <script>
    Reacton.mixins = {
      // создать елемент события eventReverse
      eventReverse: new Reacton.event()
    }

    // передать шаблоны компонентов в библиотеку Reacton
    Reacton(...document.querySelectorAll('template[name]'))
  </script>
</body>
</html>