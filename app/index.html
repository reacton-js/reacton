<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reacton</title>
</head>
<body>
  <!-- монтировать компонент Router -->
  <r-router></r-router>

  <!-- монтировать компонент Content -->
  <r-content></r-content>

  <!-- шаблон компонента Router -->
  <template name="r-router">
    <nav>
      <a href="/">Главная</a>
      <a href="/about">О нас</a>
      <a href="/contacts">Контакты</a>
    </nav>

    <script>
      exports = {
        async connected() {
          // получить елемент события eventPage
          const eventPage = this.$mixins.eventPage

          // дождаться подключения компонента Content
          await this.$when('r-content')

          // создать маршрутизатор для элемента NAV
          this.$router(this.$('nav'), {
            // вызвать событие "change-page" для элемента eventPage
            '/': () => this.$event(eventPage, 'change-page', { detail: 'r-home' }),
            '/about': () => this.$event(eventPage, 'change-page', { detail: 'r-about' }),
            '/contacts': () => this.$event(eventPage, 'change-page', { detail: 'r-contacts' })
          }, {
            // дождаться подключения компонента Content
            // when: 'r-content'
          })
        }
      }
    </script>
  </template>

  <!-- шаблон компонента Content -->
  <template name="r-content">
    <!-- элемент монтирования компонентов -->
    <article :is="page"></article>

    <script>
      exports = {
        data() {
          return {
            page: '' // название компонента
          }
        },
        connected() {
          // получить елемент события eventPage
          const eventPage = this.$mixins.eventPage

          // добавить элементу eventPage обработчик события "change-page"
          eventPage.addEventListener('change-page', event => this.page = event.detail)
        }
      }
    </script>
  </template>

  <!-- шаблон компонента Home -->
  <template name="r-home" extends="article">
    <h1>Главная</h1>
  </template>

  <!-- шаблон компонента About -->
  <template name="r-about" extends="article">
    <h1>О нас</h1>
  </template>

  <!-- шаблон компонента Contacts -->
  <template name="r-contacts" extends="article">
    <h1>Контакты</h1>
  </template>
  
  <!-- подключить библиотеку Reacton -->
  <script src="reacton.js"></script>

  <script>
    Reacton.mixins = {
      // создать елемент события eventPage
      eventPage: new Reacton.event()
    }

    // передать шаблоны компонентов в библиотеку Reacton
    Reacton(...document.querySelectorAll('template[name]'))
  </script>
</body>
</html>