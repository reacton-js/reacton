/**
* Reacton v4.0.9
* (c) 2022-2024 | github.com/reacton-js
* Released under the MIT License.
**/
let D=/\.\w+$/,F=/[A-Z]/g,H=/:(\w+)/g,z=/{{([^{}]*?)}}/,q=/('|"|`)[^]*?\1/g,R=/;|\bof\b|\bin\b/,V=/\b[A-Za-z_]\w*?\b/g,c=new WeakMap,Y=(new DOMParser).parseFromString("","text/html"),Z="window,location,history,document,navigation,screen,arguments",I="$host,$shadow,$data,$state,$event,$router,$,$$,$entities",w=e=>e.replace(q,"").split(R)[0].match(V).join(),n=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/"/g,"&quot;"],[/'/g,"&#39;"]];let o=["push","pop","shift","unshift","splice","sort","reverse","toString","add","set","delete","clear"].reduce((e,t)=>(e[t]=!0,e),{}),J=Object.getPrototypeOf(async function(){}).constructor,U=(e,t)=>(0<t?"-":"")+e,u=new DocumentFragment,h=new Set,s=Symbol(),$=Symbol(),d=Symbol(),r=Symbol(),N=Symbol(),S=Symbol(),x=Symbol(),e=Symbol(),i=Symbol(),l=Symbol(),E=Symbol(),f=Symbol(),L=Symbol(),A=Symbol(),t=Symbol(),a=Symbol(),p=Symbol(),m=Symbol(),v=Symbol(),g=Symbol();class _{constructor(e){this[r]=e}get(e,t){return this[r][t]}set(e,t,n){return this[r][t]=n,!0}}let B={childList:!0,subtree:!0};async function b(...e){for(let d of e){if(d instanceof HTMLTemplateElement){let t=d.content;var n=[...t.querySelectorAll("script")].map(e=>t.removeChild(e).innerHTML).join(""),n=await(n?new J(n)():null);if("function"!=typeof n){console.error(`Error: return value "${n}" is not a class`);continue}n.template=d.innerHTML,d=n}else if("function"!=typeof d){console.error(`Error: argument "${d}" is not a class or <template> element`);continue}n=d.name.replace(F,U).toLocaleLowerCase();let s=d.mode&&d.mode.toLocaleLowerCase();var t=d.extends&&d.extends.toLocaleLowerCase();let i=!!d.hasOwnProperty("serializable")&&d.serializable;var r=t?Object.getPrototypeOf(document.createElement(t)).constructor:HTMLElement;let l=d.alias,a=d.time;customElements.define(n,class extends r{constructor(){super(),h.add(this);var e=new d;let n=s?this.attachShadow({mode:s,serializable:i}):this;var t=(new DOMParser).parseFromString("","text/html").body;let r=this[A];delete this[A];t={funs:new WeakMap,evns:new WeakMap,deps:new WeakMap,obrs:new WeakMap,bools:new WeakMap,exec:null,nodes:[],target:e,root:n,body:t,time:a};c.set(this,t);let o=new Proxy(W(e,t),{get:(e,t)=>t===p?n:t===f?l:"$props"===t?r:"$state"===t?o:(t in e?e:this)[t]});Object.defineProperties(this,{$host:{value:this},$shadow:{value:this.shadowRoot},$data:{value:this.dataset},$props:{value:"closed"!==s?r:void 0},$state:{value:"closed"!==s?new Proxy(o,{get:(e,t)=>e[t],set:(e,t,n)=>(e[t]=n,!0)}):void 0},[g]:{value:n===this}}),t.state=o}async connectedCallback(){let e=c.get(this),{funs:r,evns:o,bools:s,root:t,body:n,state:i}=e;"function"==typeof d.startConnect&&await d.startConnect.call(i),"string"==typeof d.template&&(n.innerHTML=d.template,T(e,n),t.append(...n.childNodes),new MutationObserver(e=>{let t,n;for(t of e)for(n of t.removedNodes)y(n,r,o,s)}).observe(t,B)),"function"==typeof d.connected&&d.connected.call(i),setTimeout(()=>{h.delete(this),0===h.size&&u.dispatchEvent(new CustomEvent("load"))},1)}disconnectedCallback(){"function"==typeof d.disconnected&&d.disconnected.call(c.get(this).state)}adoptedCallback(){"function"==typeof d.adopted&&d.adopted.call(c.get(this).state)}attributeChangedCallback(e,t,n){"function"==typeof d.changed&&null!==t&&d.changed.call(c.get(this).state,e,t,n)}static get observedAttributes(){if(Array.isArray(d.attributes))return d.attributes}get $event(){return b.event}get $router(){return b.router}get[m](){return!0}$(e){return(this[p]||this.$shadow||this).querySelector(e)}$$(e){return(this[p]||this.$shadow||this).querySelectorAll(e)}$entities(...e){return b.entities(...e)}},t?{extends:t}:null)}}let T=(o,s,i)=>{if(8===s.nodeType)return s.remove();if(3===s.nodeType){var n=z.exec(s.data);n&&(0===n.index?(s.splitText(n[0].length),{state:l,funs:r,exec:a,nodes:d}=o,a=a?a.call(l,n[1].trim()):M(l,n[1].trim()),i?(s[e]=a,s.data=""):(r.set(s,a),d.push(s),s.data=a(),d.pop())):s.splitText(n.index))}else{if(2===s.nodeType&&(":"===s.nodeName[0]||"@"===s.nodeName[0]||"$"===s.nodeName[0])){var{state:l,funs:r,evns:t,bools:a,exec:d,nodes:n}=o,c=s.ownerElement,u=s.nodeName.slice(1);if("$for"===s.nodeName){var h=s.value.trim(),f=i?i+(","+w(h)):w(h),p=G(l,h,d),h=o.exec;o.exec=p.next().value;let e=0;for(;e<c.childNodes.length;e++)T(o,c.childNodes[e],f)||e--;o.exec=h;var m=new DocumentFragment,h=(m.append(...c.childNodes),{iter:p,frag:m,wrap:{childNodes:[]},len:m.childNodes.length});if(i)c[N]=h;else{for(r.set(c,h),n.push(c);!p.next().value;)c.append(O(t,m.cloneNode(!0),m));n.pop()}}else if("@"===s.nodeName[0]){var h=u.split("."),v=h.slice(1).reduce((e,t)=>(e[t]=!0,e),{});if(i){var g=`() => ((${i}) => event => ${s.value.trim()})(${i})`,g=d.call(l,g,!0);let e=c[E];e||(e=new Set,c[E]=e),e.add({name:h[0],cb:g,props:v})}else c.addEventListener(h[0],M(l,s.value.trim()),v)}else{g=i?d.call(l,s.value.trim()):M(l,s.value.trim());if("$view"===s.nodeName)if(c.removeAttribute("$view"),i)c[x]=g;else{var h={},b=(r.set(h,g),n.push(h),v=g(),n.pop(),document.createElement(v));c[A]&&(b[A]=c[A]),h[$]=b;let e=0,t=c.attributes;for(;e<t.length;e++)b.setAttributeNode(c.removeAttributeNode(t[e])),e--;c.replaceWith(b)}else if(":"===s.nodeName[0])if("boolean"==typeof c[u]){let e,t;i?(t={name:u,cb:g},(e=c[L])||(e=new Set,c[L]=e)):(t={[S]:c,name:u},r.set(t,g),(e=a.get(c))||(e=new Set,a.set(c,e)),n.push(t),g()&&(c[u]=!0),n.pop()),e.add(t)}else{c.setAttribute(u,"");d=c.attributes[u];i?(d[e]=g,d.value=""):(r.set(d,g),n.push(d),d.value=g(),n.pop())}}return c.removeAttribute(s.nodeName)}{let t,n,r=s.attributes;if(r.length){if(r.$props){var l=r.$props,y=o.state;if(s.removeAttribute("$props"),l.value){let e,t={},n=l.value.split(",");for(e of n)e=e.trim(),t[e]=y[e];s[A]=new Proxy(t,new _(y))}else s[A]=y}r.$view?(s.removeAttribute("$for"),t=!0):r.$for&&(n=!0);let e=0;for(;e<r.length;e++)":"!==r[e].name[0]&&"@"!==r[e].name[0]||T(o,r[e],i)||e--}if(t)T(o,r.$view,i);else if(n)T(o,r.$for,i);else{let e=0,t=s.childNodes;for(;e<t.length;e++)T(o,t[e],i)||e--}}}return s},y=(t,n,e,r)=>{if(n.delete(t),1===t.nodeType){var o=r.get(t);if(o){let e;for(e of o)n.delete(e);o.clear(),r.delete(t)}e.delete(t)}if(t.attributes){let e=0;for(;e<t.attributes.length;e++)y(t.attributes[e],n)}let s=0;for(;s<t.childNodes.length;s++)y(t.childNodes[s],n,e,r)},M=(t,n)=>"function"==typeof t[n]?e=>t[n].call(t,e):Function(Z,`const {${I}} = this${t[f]?`,${t[f]} = this
`:"\nwith ($host) with (this)"} return event => {'use strict'
return ${n}}`).call(t),P=e=>`(function*(){ yield function(){ return eval(arguments[1] ? arguments[0] : 'event => ' + arguments[0]) }
while (true){ for (var ${e}) yield; yield true }})`,G=(e,t,n)=>(n?n.call(e,P(t)):M(e,P(t)))().call(e),C=(t,n,e)=>{let r=0,{iter:o,frag:s,wrap:i,len:l}=e,a=n.childNodes;for(;!o.next().value;){if(a[r]){let e=0;for(;e<l;e++)i.childNodes[e]=a[e+r];O(t,i,s)}else n.append(O(t,s.cloneNode(!0),s));r+=l}if(r<a.length){let e=a.length;for(;e>r;e--)n.lastChild.remove()}i.childNodes.length=0},O=(n,r,o)=>{if(o[e])r.nodeValue=o[e]();else{if(o.attributes){let e=0,t=r.attributes;for(;e<o.attributes.length;e++)t[e]&&O(null,t[e],o.attributes[e]);if(o[L])for(var{name:s,cb:i}of o[L])r[s]=!!i();if(o[E]){let e;for(e of o[E]){var{name:l,cb:a,props:d}=e,a=a(),c=n.get(r);c&&r.removeEventListener(l,c,d),r.addEventListener(l,a,d),n.set(r,a)}}}if(o[x]){var u=document.createElement(o[x]());o[A]&&(u[A]=o[A]);let e=0,t=r.attributes;for(;e<t.length;e++)u.setAttributeNode(r.removeAttributeNode(t[e])),e--;r.replaceWith(u)}else if(o[N])C(n,r,o[N]);else{let e=0;for(;e<o.childNodes.length;e++)O(n,r.childNodes[e],o.childNodes[e])}}return r},k=(e,{funs:t,evns:n,nodes:r,time:o})=>{let s;o&&(s=performance.now());let i,l;for(i of e)if(l=t.get(i)){if(r&&r.push(i),1===i.nodeType)C(n,i,l);else if(i[$]){var a=i[$],d=a.attributes,c=document.createElement(l());a[A]&&(c[A]=a[A]),i[$]=c;let e=0;for(;e<d.length;e++)c.setAttributeNode(a.removeAttributeNode(d[e])),e--;a.replaceWith(c)}else i[S]?i[S][i.name]=!!l():i.nodeValue=l();r&&r.pop()}else e.delete(i);o&&console.log(performance.now()-s+" ms")},W=(e,t,n)=>{n=new Proxy(e,new K(t,n));return t.obrs.set(e,n),n};class K{constructor(e,t){this[s]=e,this[i]=t}get(n,r){if(n.hasOwnProperty(r)||o[r]){if(this[t]=this[s].obrs.get(n[r]))return this[t];if(this[s].nodes.length&&((this[v]="object"==typeof n[r]&&null!==n[r])||n===this[s].target)){let e,t=this[s].deps.get(n);if(t||(t=o[r]?{[r]:null}:{},this[s].deps.set(n,t)),(e=(e=t[r])||(t[r]=new Set)).add(this[s].nodes[0]),this[v])return W(n[r],this[s],e)}if(o[r])return this[l]=n,new Proxy(n[r],this)}return n[r]}set(e,t,n){return this[a]=this[s].deps.get(e),(this[a]=this[a]&&this[a][t]||this[i])?("object"==typeof e[t]&&null!==e[t]&&this[s].obrs.delete(e[t]),void 0===e[t]&&Array.isArray(e)?e.splice(t,0,n):e[t]=n,this[s].nodes.length||k(this[a],this[s])):e[t]=n,!0}apply(e,t,n){var r;return"toString"===e.name?(r=this[l]instanceof Map?"Map":this[l]instanceof Set?"Set":"",JSON.stringify(r?{[r]:[...this[l]]}:t,null," ")):o[e.name]?(e.apply(this[l],n),this[i]&&!this[s].nodes.length&&k(this[i],this[s]),t):e.apply(t,n)}deleteProperty(e,t){var n;return this[a]=this[s].deps.get(e),(this[a]=this[a]&&this[a][t]||this[i])?("object"==typeof e[t]&&null!==e[t]&&this[s].obrs.delete(e[t]),n=Array.isArray(e)?!!e.splice(t,1).length:!(e[t]=void 0),this[s].nodes.length||k(this[a],this[s]),n):delete e[t]}}function j(e,t,n){var r,o,s=e[d].regs,i=t.replace(location.origin,"");for([r,o]of s){var l,a=r.exec(i);a&&((l=new CustomEvent(o,{detail:n})).url=new URL(t),l.params=a.groups,l.search=l.url.searchParams,e.dispatchEvent(l))}}b.entities=function(e,...t){return(t.length?[...n,...t]:n).reduce((e,t)=>e.replace(...t),e)};export default b;var Q=b.event=function(e,t,n=null){if(new.target)return new DocumentFragment;e.dispatchEvent(new CustomEvent(t,{detail:n}))},X=b.router=function(e,t,n=null){if(new.target){let t={},n=new Map,r=new class extends DocumentFragment{addEventListener(...e){n.set(new RegExp(`^/?${e[0].replace(H,(e,t)=>`(?<${t}>\\w+)`)}/?$`),e[0]),document.addEventListener.call(this,...e)}};return r[d]={idx:0,vals:t,regs:n},window.addEventListener("popstate",e=>{j(r,location.href,t[e.state])}),r}var r;t&&t.startsWith(location.origin)&&!D.test(t)&&(r=e[d],history.pushState(r.idx,"",t),j(e,t,r.vals[r.idx++]=n))},ee=b.render=async function({parent:e=document.children[0],slots:t=!1,clean:n=!0}={}){await new Promise(e=>u.addEventListener("load",e));var r=document.createElement("template");return function t(n,e,r,o){if(o&&("STYLE"===n.nodeName||"SCRIPT"===n.nodeName||"TEMPLATE"===n.nodeName||8===n.nodeType))return;let s;if("SLOT"!==n.nodeName||r)if(n[m]){s=Y.createElement(n.nodeName);let e;for(e of n.attributes)s.setAttribute(e.name,e.value);n[g]||(n=c.get(n).root)}else s=n.cloneNode(!1);else s=new DocumentFragment;let i=n.assignedNodes?n.assignedNodes({flatten:!1}):(n.content||n).childNodes;if(i){let e=0;for(;e<i.length;e++)t(i[e],s.content||s,r,o)}e.append(s)}(e,r.content,t,n),e===document.children[0]?`<!DOCTYPE html>
`+r.innerHTML:r.innerHTML},te=b.entities;export{Q as Event,X as Router,ee as Render,te as Entities};