/**
* Reacton v4.0.8
* (c) 2022-2024 | github.com/reacton-js
* Released under the MIT License.
**/
let o=/\.\w+$/,d=/[A-Z]/g,F=/:(\w+)/g,H=/{{([^{}]*?)}}/,t=/('|"|`)[^]*?\1/g,z=/;|\bof\b|\bin\b/,q=/\b[A-Za-z_]\w*?\b/g,c=new WeakMap,R=(new DOMParser).parseFromString("","text/html"),V="window,location,history,document,navigation,screen,arguments",Y="$host,$shadow,$data,$state,$event,$router,$,$$,$entities",$=e=>e.replace(t,"").split(z)[0].match(q).join(),n=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/"/g,"&quot;"],[/'/g,"&#39;"]];let s=["push","pop","shift","unshift","splice","sort","reverse","toString","add","set","delete","clear"].reduce((e,t)=>(e[t]=!0,e),{}),Z=Object.getPrototypeOf(async function(){}).constructor,I=(e,t)=>(0<t?"-":"")+e,u=new DocumentFragment,h=new Set,a=Symbol(),N=Symbol(),f=Symbol(),S=Symbol(),x=Symbol(),E=Symbol(),L=Symbol(),i=Symbol(),l=Symbol(),A=Symbol(),m=Symbol(),T=Symbol(),e=Symbol(),r=Symbol(),p=Symbol(),v=Symbol(),g=Symbol(),b=Symbol(),J={childList:!0,subtree:!0};async function w(...e){for(let i of e){if(i instanceof HTMLTemplateElement){let t=i.content;var n=[...t.querySelectorAll("script")].map(e=>t.removeChild(e).innerHTML).join(""),n=await(n?new Z(n)():null);if("function"!=typeof n){console.error(`Error: return value "${n}" is not a class`);continue}n.template=i.innerHTML,i=n}else if("function"!=typeof i){console.error(`Error: argument "${i}" is not a class or <template> element`);continue}n=i.name.replace(d,I).toLocaleLowerCase();let r=i.mode&&i.mode.toLocaleLowerCase();var t=i.extends&&i.extends.toLocaleLowerCase();let o=!!i.hasOwnProperty("serializable")&&i.serializable;var l=t?Object.getPrototypeOf(document.createElement(t)).constructor:HTMLElement;let s=i.alias,a=i.time;customElements.define(n,class extends l{constructor(){super(),h.add(this);var e=new i;let n=r?this.attachShadow({mode:r,serializable:o}):this;var t=(new DOMParser).parseFromString("","text/html").body,t={funs:new WeakMap,evns:new WeakMap,deps:new WeakMap,obrs:new WeakMap,bools:new WeakMap,exec:null,nodes:[],target:e,root:n,body:t,time:a},e=(c.set(this,t),new Proxy(j(e,t),{get:(e,t)=>t===p?n:t===m?s:(t in e?e:this)[t]}));Object.defineProperties(this,{$host:{value:this},$shadow:{value:this.shadowRoot},$data:{value:this.dataset},$state:{value:new Proxy(e,{get:(e,t)=>{if("closed"!==r)return e[t]},set:(e,t,n)=>{if("closed"===r)throw new Error("cannot change the state of a closed component");return e[t]=n,!0}})},[b]:{value:n===this}}),t.state=e}async connectedCallback(){let e=c.get(this),{funs:r,evns:o,bools:s,root:t,body:n,state:a}=e;"function"==typeof i.startConnect&&await i.startConnect.call(a),"string"==typeof i.template&&(n.innerHTML=i.template,M(e,n),t.append(...n.childNodes),new MutationObserver(e=>{for(var t of e)for(var n of t.removedNodes)y(n,r,o,s)}).observe(t,J)),"function"==typeof i.connected&&i.connected.call(a),setTimeout(()=>{h.delete(this),0===h.size&&u.dispatchEvent(new CustomEvent("load"))},1)}disconnectedCallback(){"function"==typeof i.disconnected&&i.disconnected.call(c.get(this).state)}adoptedCallback(){"function"==typeof i.adopted&&i.adopted.call(c.get(this).state)}attributeChangedCallback(e,t,n){"function"==typeof i.changed&&null!==t&&i.changed.call(c.get(this).state,e,t,n)}static get observedAttributes(){if(Array.isArray(i.attributes))return i.attributes}get $event(){return w.event}get $router(){return w.router}get[v](){return!0}$(e){return(this[p]||this.$shadow||this).querySelector(e)}$$(e){return(this[p]||this.$shadow||this).querySelectorAll(e)}$entities(...e){return w.entities(...e)}},t?{extends:t}:null)}}let M=(r,o,s)=>{if(8===o.nodeType)return o.remove();if(3===o.nodeType){var n=H.exec(o.data);n&&(0===n.index?(o.splitText(n[0].length),{state:t,funs:a,exec:i,nodes:l}=r,i=i?i.call(t,n[1].trim()):C(t,n[1].trim()),s?(o[L]=i,o.data=""):(a.set(o,i),l.push(o),o.data=i(),l.pop())):o.splitText(n.index))}else{if(2===o.nodeType&&(":"===o.nodeName[0]||"@"===o.nodeName[0]||"$"===o.nodeName[0])){var{state:t,funs:a,evns:e,bools:i,exec:l,nodes:n}=r,d=o.ownerElement,c=o.nodeName.slice(1);if("$for"===o.nodeName){var u=o.value.trim(),h=s?s+(","+$(u)):$(u),f=U(t,u,l),u=r.exec;r.exec=f.next().value;for(var m=0;m<d.childNodes.length;m++)M(r,d.childNodes[m],h)||m--;r.exec=u;var p=new DocumentFragment,u=(p.append(...d.childNodes),{iter:f,frag:p,wrap:{childNodes:[]},len:p.childNodes.length});if(s)d[S]=u;else{for(a.set(d,u),n.push(d);!f.next().value;)d.append(k(e,p.cloneNode(!0),p));n.pop()}}else if("@"===o.nodeName[0]){var u=c.split("."),v=u.slice(1).reduce((e,t)=>(e[t]=!0,e),{});if(s){var g=`() => ((${s}) => event => ${o.value.trim()})(${s})`,g=l.call(t,g,!0);let e=d[A];e||(e=new Set,d[A]=e),e.add({name:u[0],cb:g,props:v})}else d.addEventListener(u[0],C(t,o.value.trim()),v)}else{g=s?l.call(t,o.value.trim()):C(t,o.value.trim());if("$view"===o.nodeName)if(d.removeAttribute("$view"),s)d[E]=g;else{var u={},b=(a.set(u,g),n.push(u),v=g(),n.pop(),document.createElement(v));u[N]=b;for(var m=0,w=d.attributes;m<w.length;m++)b.setAttributeNode(d.removeAttributeNode(w[m])),m--;d.replaceWith(b)}else if(":"===o.nodeName[0])if("boolean"==typeof d[c]){let e,t;s?(t={name:c,cb:g},(e=d[T])||(e=new Set,d[T]=e)):(t={[x]:d,name:c},a.set(t,g),(e=i.get(d))||(e=new Set,i.set(d,e)),n.push(t),g()&&(d[c]=!0),n.pop()),e.add(t)}else{d.setAttribute(c,"");l=d.attributes[c];s?(l[L]=g,l.value=""):(a.set(l,g),n.push(l),l.value=g(),n.pop())}}return d.removeAttribute(o.nodeName)}{let e,t,n=o.attributes;if(n.length){n.$view?(o.removeAttribute("$for"),e=!0):n.$for&&(t=!0);for(m=0;m<n.length;m++)":"!==n[m].name[0]&&"@"!==n[m].name[0]||M(r,n[m],s)||m--}if(e)M(r,n.$view,s);else if(t)M(r,n.$for,s);else for(var m=0,y=o.childNodes;m<y.length;m++)M(r,y[m],s)||m--}}return o},y=(e,t,n,r)=>{if(t.delete(e),1===e.nodeType){var o=r.get(e);if(o){for(var s of o)t.delete(s);o.clear(),r.delete(e)}n.delete(e)}if(e.attributes)for(var a=0;a<e.attributes.length;a++)y(e.attributes[a],t);for(a=0;a<e.childNodes.length;a++)y(e.childNodes[a],t,n,r)},C=(t,n)=>"function"==typeof t[n]?e=>t[n].call(t,e):Function(V,`const {${Y}} = this${t[m]?`,${t[m]} = this
`:"\nwith ($host) with (this)"} return event => {'use strict'
return ${n}}`).call(t),P=e=>`(function*(){ yield function(){ return eval(arguments[1] ? arguments[0] : 'event => ' + arguments[0]) }
while (true){ for (var ${e}) yield; yield true }})`,U=(e,t,n)=>(n?n.call(e,P(t)):C(e,P(t)))().call(e),O=(e,t,n)=>{let r=0,{iter:o,frag:s,wrap:a,len:i}=n,l=t.childNodes;for(;!o.next().value;){if(l[r]){for(var d=0;d<i;d++)a.childNodes[d]=l[d+r];k(e,a,s)}else t.append(k(e,s.cloneNode(!0),s));r+=i}if(r<l.length)for(d=l.length;d>r;d--)t.lastChild.remove();a.childNodes.length=0},k=(s,a,e)=>{if(e[L])a.nodeValue=e[L]();else{if(e.attributes){for(var t=0,n=a.attributes;t<e.attributes.length;t++)n[t]&&k(null,n[t],e.attributes[t]);if(e[T])for(var{name:r,cb:o}of e[T])a[r]=!!o();if(e[A])for(var i of e[A]){let{name:e,cb:t,props:n}=i,r=t(),o=s.get(a);o&&a.removeEventListener(e,o,n),a.addEventListener(e,r,n),s.set(a,r)}}if(e[E]){for(var l=document.createElement(e[E]()),t=0,n=a.attributes;t<n.length;t++)l.setAttributeNode(a.removeAttributeNode(n[t])),t--;a.replaceWith(l)}else if(e[S])O(s,a,e[S]);else for(t=0;t<e.childNodes.length;t++)k(s,a.childNodes[t],e.childNodes[t])}return a},W=(e,{funs:t,evns:n,nodes:r,time:o})=>{var s,a;o&&(s=performance.now());for(a of e){var i=t.get(a);if(i){if(r&&r.push(a),1===a.nodeType)O(n,a,i);else if(a[N]){var l=a[N],d=l.attributes,c=document.createElement(i());a[N]=c;for(var u=0;u<d.length;u++)c.setAttributeNode(l.removeAttributeNode(d[u])),u--;l.replaceWith(c)}else a[x]?a[x][a.name]=!!i():a.nodeValue=i();r&&r.pop()}else e.delete(a)}o&&console.log(performance.now()-s+" ms")},j=(e,t,n)=>{n=new Proxy(e,new _(t,n));return t.obrs.set(e,n),n};class _{constructor(e,t){this[a]=e,this[i]=t}get(n,r){if(n.hasOwnProperty(r)||s[r]){if(this[e]=this[a].obrs.get(n[r]))return this[e];if(this[a].nodes.length&&((this[g]="object"==typeof n[r]&&null!==n[r])||n===this[a].target)){let e,t=this[a].deps.get(n);if(t||(t=s[r]?{[r]:null}:{},this[a].deps.set(n,t)),(e=(e=t[r])||(t[r]=new Set)).add(this[a].nodes[0]),this[g])return j(n[r],this[a],e)}if(s[r])return this[l]=n,new Proxy(n[r],this)}return n[r]}set(e,t,n){return this[r]=this[a].deps.get(e),(this[r]=this[r]&&this[r][t]||this[i])?("object"==typeof e[t]&&null!==e[t]&&this[a].obrs.delete(e[t]),void 0===e[t]&&Array.isArray(e)?e.splice(t,0,n):e[t]=n,this[a].nodes.length||W(this[r],this[a])):e[t]=n,!0}apply(e,t,n){var r;return"toString"===e.name?(r=this[l]instanceof Map?"Map":this[l]instanceof Set?"Set":"",JSON.stringify(r?{[r]:[...this[l]]}:t,null," ")):s[e.name]?(e.apply(this[l],n),this[i]&&!this[a].nodes.length&&W(this[i],this[a]),t):e.apply(t,n)}deleteProperty(e,t){var n;return this[r]=this[a].deps.get(e),(this[r]=this[r]&&this[r][t]||this[i])?("object"==typeof e[t]&&null!==e[t]&&this[a].obrs.delete(e[t]),n=Array.isArray(e)?!!e.splice(t,1).length:!(e[t]=void 0),this[a].nodes.length||W(this[r],this[a]),n):delete e[t]}}function D(e,t,n){var r,o,s=e[f].regs,a=t.replace(location.origin,"");for([r,o]of s){var i,l=r.exec(a);l&&((i=new CustomEvent(o,{detail:n})).url=new URL(t),i.params=l.groups,i.search=i.url.searchParams,e.dispatchEvent(i))}}w.entities=function(e,...t){return(t.length?[...n,...t]:n).reduce((e,t)=>e.replace(...t),e)};export default w;var B=w.event=function(e,t,n=null){if(new.target)return new DocumentFragment;e.dispatchEvent(new CustomEvent(t,{detail:n}))},G=w.router=function(e,t,n=null){if(new.target){let t={},n=new Map,r=new class extends DocumentFragment{addEventListener(...e){n.set(new RegExp(`^/?${e[0].replace(F,(e,t)=>`(?<${t}>\\w+)`)}/?$`),e[0]),document.addEventListener.call(this,...e)}};return r[f]={idx:0,vals:t,regs:n},window.addEventListener("popstate",e=>{D(r,location.href,t[e.state])}),r}var r;t&&t.startsWith(location.origin)&&!o.test(t)&&(r=e[f],history.pushState(r.idx,"",t),D(e,t,r.vals[r.idx++]=n))},K=w.render=async function({parent:e=document.children[0],slots:t=!1,clean:n=!0}={}){await new Promise(e=>u.addEventListener("load",e));var r=document.createElement("template");return function e(t,n,r,o){if(o&&("STYLE"===t.nodeName||"SCRIPT"===t.nodeName||"TEMPLATE"===t.nodeName||8===t.nodeType))return;let s;if("SLOT"!==t.nodeName||r)if(t[v]){s=R.createElement(t.nodeName);for(var a of t.attributes)s.setAttribute(a.name,a.value);t[b]||(t=c.get(t).root)}else s=t.cloneNode(!1);else s=new DocumentFragment;let i=t.assignedNodes?t.assignedNodes({flatten:!1}):(t.content||t).childNodes;if(i)for(var l=0;l<i.length;l++)e(i[l],s.content||s,r,o);n.append(s)}(e,r.content,t,n),e===document.children[0]?`<!DOCTYPE html>
`+r.innerHTML:r.innerHTML},Q=w.entities;export{B as Event,G as Router,K as Render,Q as Entities};