/**
* Reacton v4.0.6
* (c) 2022-2024 | github.com/reacton-js
* Released under the MIT License.
**/
let o=/\.\w+$/,d=/[A-Z]/g,s=/:(\w+)/g,w=/{{([^{}]*?)}}/,t=/('|"|`)[^]*?\1/g,H=/;|\bof\b|\bin\b/,W=/\b[A-Za-z_]\w*?\b/g,c=new WeakMap,z=(new DOMParser).parseFromString("","text/html"),q="window,location,history,document,navigation,screen",R="$host,$shadow,$data,$state,$event,$router,$,$$,$entities",y=e=>e.replace(t,"").split(H)[0].match(W).join(),n=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/"/g,"&quot;"],[/'/g,"&#39;"]];let a=["push","pop","shift","unshift","splice","sort","reverse","toString","add","set","delete","clear"].reduce((e,t)=>(e[t]=!0,e),{}),V=Object.getPrototypeOf(async function(){}).constructor,Y=(e,t)=>(0<t?"-":"")+e,u=new DocumentFragment,h=new Set,i=Symbol(),f=Symbol(),l=Symbol(),p=Symbol(),$=Symbol(),m=Symbol(),S=Symbol(),N=Symbol(),r=Symbol(),v=Symbol(),e=Symbol(),g=Symbol(),b=Symbol(),x=Symbol(),E=Symbol(),L=Symbol(),Z={childList:!0,subtree:!0};async function T(...e){for(let i of e){if(i instanceof HTMLTemplateElement){let t=i.content;var n=[...t.querySelectorAll("script")].map(e=>t.removeChild(e).innerHTML).join(""),n=await(n?new V(n)():null);if("function"!=typeof n){console.error(`Error: return value "${n}" is not a class`);continue}n.template=i.innerHTML,i=n}else if("function"!=typeof i){console.error(`Error: argument "${i}" is not a class or <template> element`);continue}n=i.name.replace(d,Y).toLocaleLowerCase();let r=i.mode&&i.mode.toLocaleLowerCase();var t=i.extends&&i.extends.toLocaleLowerCase();let o=!!i.hasOwnProperty("serializable")&&i.serializable;var l=t?Object.getPrototypeOf(document.createElement(t)).constructor:HTMLElement;let s=i.alias,a=i.time;customElements.define(n,class extends l{constructor(){super(),h.add(this);var e=new i;let n=r?this.attachShadow({mode:r,serializable:o}):this;var t=(new DOMParser).parseFromString("","text/html").body,t={funs:new WeakMap,evns:new WeakMap,deps:new WeakMap,obrs:new WeakMap,bools:new WeakMap,exec:null,nodes:[],target:e,root:n,temp:t,time:a},e=(c.set(this,t),new Proxy(D(e,t),{get:(e,t)=>t===v?n:t===m?s:(t in e?e:this)[t]}));Object.defineProperties(this,{$host:{value:this},$shadow:{value:this.shadowRoot},$data:{value:this.dataset},$state:{value:new Proxy(e,{get:(e,t)=>{if("closed"!==r)return e[t]},set:(e,t,n)=>{if("closed"===r)throw new Error("cannot change the state of a closed component");return e[t]=n,!0}})},[b]:{value:n===this}}),t.state=e}async connectedCallback(){let e=c.get(this),{funs:r,evns:o,bools:s,root:t,temp:n,state:a}=e;"function"==typeof i.startConnect&&await i.startConnect.call(a),"string"==typeof i.template&&(n.innerHTML=i.template,M(e,n),t.append(...n.childNodes),new MutationObserver(e=>{for(var t of e)for(var n of t.removedNodes)C(n,r,o,s)}).observe(t,Z)),"function"==typeof i.connected&&i.connected.call(a),setTimeout(()=>{h.delete(this),0===h.size&&u.dispatchEvent(new CustomEvent("load"))},1)}disconnectedCallback(){"function"==typeof i.disconnected&&i.disconnected.call(c.get(this).state)}adoptedCallback(){"function"==typeof i.adopted&&i.adopted.call(c.get(this).state)}attributeChangedCallback(e,t,n){"function"==typeof i.changed&&null!==t&&i.changed.call(c.get(this).state,e,t,n)}static get observedAttributes(){if(Array.isArray(i.attributes))return i.attributes}get $event(){return T.event}get $router(){return T.router}get[g](){return!0}$(e){return(this[v]||this.$shadow||this).querySelector(e)}$$(e){return(this[v]||this.$shadow||this).querySelectorAll(e)}$entities(...e){return T.entities(...e)}},t?{extends:t}:null)}}let M=(e,t,n)=>{if(8===t.nodeType)return t.remove();if(3===t.nodeType){var r=w.exec(t.data);r&&(0===r.index?(t.splitText(r[0].length),{state:o,funs:i,exec:l,nodes:d}=e,l=l?l.call(o,r[1].trim()):P(o,r[1].trim()),i.set(t,l),d.push(t),n?(t[x]=!0,t.data="",l()):t.data=l(),d.pop()):t.splitText(r.index))}else{if(2===t.nodeType&&(":"===t.nodeName[0]||"@"===t.nodeName[0]||"$for"===t.nodeName)){var{state:o,funs:s,evns:a,bools:i,exec:l,nodes:d}=e,c=t.ownerElement,r=t.nodeName.slice(1);if("$"===t.nodeName[0]){var u=t.value.trim(),h=n?n+(","+y(u)):y(u),f=I(o,u,l),u=e.exec;e.exec=f.next().value;for(var p=0;p<c.childNodes.length;p++)M(e,c.childNodes[p],h)||p--;e.exec=u;var m=new DocumentFragment,u=(m.append(...c.childNodes),{iter:f,frag:m,wrap:{childNodes:[]},len:m.childNodes.length});if(s.set(c,u),d.push(c),n)c[L]=!0;else for(;!f.next().value;)c.append(k(s,a,m.cloneNode(!0),m));d.pop()}else if(":"===t.nodeName[0]){u=n?l.call(o,t.value.trim()):P(o,t.value.trim());if("is"!==r){if("boolean"==typeof c[r]){let e,t={[N]:c,name:r};s.set(t,u),d.push(t),n?((e=c[S])||(e=new Set,c[S]=e),u()):((e=i.get(c))||(e=new Set,i.set(c,e)),u()&&(c[r]=!0)),e.add(t)}else{c.setAttribute(r,"");i=c.attributes[r];s.set(i,u),d.push(i),n?(i[x]=!0,i.value="",u()):i.value=u()}d.pop()}}else{i=r.split("."),u=i.slice(1).reduce((e,t)=>(e[t]=!0,e),{});if(n){d=`() => ((${n}) => event => ${t.value.trim()})(${n})`,r=l.call(o,d,!0);let e=c[$];e||(e=new Set,c[$]=e),e.add({name:i[0],cb:r,props:u})}else c.addEventListener(i[0],P(o,t.value.trim()),u)}return c.removeAttribute(t.nodeName)}if(t.attributes)for(var p=0,v=t.attributes,g=v.$for;p<v.length;p++)M(e,v[p],n)||p--;if(!g)for(var p=0,b=t.childNodes;p<b.length;p++)M(e,b[p],n)||p--}return t},C=(e,t,n,r)=>{if(t.delete(e),1===e.nodeType){var o=r.get(e);if(o){for(var s of o)t.delete(s);o.clear(),r.delete(e)}n.delete(e)}if(e.attributes)for(var a=0;a<e.attributes.length;a++)C(e.attributes[a],t);for(a=0;a<e.childNodes.length;a++)C(e.childNodes[a],t,n,r)},P=(t,n)=>"function"==typeof t[n]?e=>t[n].call(t,e):Function(q,`const {${R}} = this${t[m]?`,${t[m]} = this
`:"\nwith ($host) with (this)"} return event => {'use strict'
return ${n}}`).call(t),A=e=>`(function*(){ yield function(){ return eval(arguments[1] ? arguments[0] : 'event => ' + arguments[0]) }
while (true){ for (var ${e}) yield; yield true }})`,I=(e,t,n)=>(n?n.call(e,A(t)):P(e,A(t)))().call(e),O=(e,t,n,r)=>{let o=0,{iter:s,frag:a,wrap:i,len:l}=r,d=n.childNodes;for(;!s.next().value;){if(d[o]){for(var c=0;c<l;c++)i.childNodes[c]=d[c+o];k(e,t,i,a)}else n.append(k(e,t,a.cloneNode(!0),a));o+=l}if(o<d.length)for(c=d.length;c>o;c--)n.lastChild.remove();i.childNodes.length=0},k=(e,t,n,r)=>{if(r[x])n.nodeValue=e.get(r)();else{if(r.attributes){for(var o=0,s=n.attributes;o<r.attributes.length;o++)s[o]&&k(e,null,s[o],r.attributes[o]);if(r[S])for(var a of r[S])n[a.name]=!!e.get(a)();if(r[$])for(var a of r[$]){var{name:i,cb:l,props:d}=a,l=l(),c=t.get(n);c&&n.removeEventListener(i,c,d),n.addEventListener(i,l,d),t.set(n,l)}}if(r[L])O(e,t,n,e.get(r));else for(o=0;o<r.childNodes.length;o++)k(e,t,n.childNodes[o],r.childNodes[o])}return n},j=(e,{funs:t,evns:n,nodes:r,time:o})=>{var s,a;o&&(s=performance.now());for(a of e){var i=t.get(a);i?(r&&r.push(a),1===a.nodeType?O(t,n,a,i):a[N]?a[N][a.name]=!!i():a.nodeValue=i(),r&&r.pop()):e.delete(a)}o&&console.log(performance.now()-s+" ms")},D=(e,t,n)=>{n=new Proxy(e,new J(t,n));return t.obrs.set(e,n),n};class J{constructor(e,t){this[i]=e,this[l]=t}get(n,r){if(n.hasOwnProperty(r)||a[r]){if(this[e]=this[i].obrs.get(n[r]),this[e])return this[e];if(this[i].nodes.length&&((this[E]="object"==typeof n[r]&&null!==n[r])||n===this[i].target)){let e,t=this[i].deps.get(n);if(t||(t=a[r]?{[r]:null}:{},this[i].deps.set(n,t)),(e=(e=t[r])||(t[r]=new Set)).add(this[i].nodes[0]),this[E])return D(n[r],this[i],e)}if(a[r])return this[p]=n,new Proxy(n[r],this)}return n[r]}set(e,t,n){return this[r]=this[i].deps.get(e),(this[r]=this[r]&&this[r][t]||this[l])?("object"==typeof e[t]&&null!==e[t]&&this[i].obrs.delete(e[t]),void 0===e[t]&&Array.isArray(e)?e.splice(t,0,n):e[t]=n,this[i].nodes.length||j(this[r],this[i])):e[t]=n,!0}apply(e,t,n){var r;return"toString"===e.name?(r=this[p]instanceof Map?"Map":this[p]instanceof Set?"Set":"",JSON.stringify(r?{[r]:[...this[p]]}:t,null," ")):a[e.name]?(e.apply(this[p],n),this[l]&&!this[i].nodes.length&&j(this[l],this[i]),t):e.apply(t,n)}deleteProperty(e,t){var n;return this[r]=this[i].deps.get(e),(this[r]=this[r]&&this[r][t]||this[l])?("object"==typeof e[t]&&null!==e[t]&&this[i].obrs.delete(e[t]),n=Array.isArray(e)?!!e.splice(t,1).length:!(e[t]=void 0),this[i].nodes.length||j(this[r],this[i]),n):delete e[t]}}function F(e,t,n){var r,o,s=e[f].regs,a=t.replace(location.origin,"");for([r,o]of s){var i,l=r.exec(a);l&&((i=new CustomEvent(o,{detail:n})).url=new URL(t),i.params=l.groups,i.search=i.url.searchParams,e.dispatchEvent(i))}}T.entities=function(e,...t){return(t.length?[...n,...t]:n).reduce((e,t)=>e.replace(...t),e)};export default T;var U=T.event=function(e,t,n=null){if(new.target)return new DocumentFragment;e.dispatchEvent(new CustomEvent(t,{detail:n}))},_=T.router=function(e,t,n=null){if(new.target){let t={},n=new Map,r=new class extends DocumentFragment{addEventListener(...e){n.set(new RegExp(`^/?${e[0].replace(s,(e,t)=>`(?<${t}>\\w+)`)}/?$`),e[0]),document.addEventListener.call(this,...e)}};return r[f]={idx:0,vals:t,regs:n},window.addEventListener("popstate",e=>{F(r,location.href,t[e.state])}),r}var r;t&&t.startsWith(location.origin)&&!o.test(t)&&(r=e[f],history.pushState(r.idx,"",t),F(e,t,r.vals[r.idx++]=n))},B=T.render=async function({parent:e=document.children[0],slots:t=!1,clean:n=!0}={}){await new Promise(e=>u.addEventListener("load",e));var r=document.createElement("template");return function e(t,n,r,o){if(o&&("STYLE"===t.nodeName||"SCRIPT"===t.nodeName||"TEMPLATE"===t.nodeName||8===t.nodeType))return;let s;if("SLOT"!==t.nodeName||r)if(t[g]){s=z.createElement(t.nodeName);for(var a of t.attributes)s.setAttribute(a.name,a.value);t[b]||(t=c.get(t).root)}else s=t.cloneNode(!1);else s=new DocumentFragment;let i=t.assignedNodes?t.assignedNodes({flatten:!1}):(t.content||t).childNodes;if(i)for(var l=0;l<i.length;l++)e(i[l],s.content||s,r,o);n.append(s)}(e,r.content,t,n),e===document.children[0]?`<!DOCTYPE html>
`+r.innerHTML:r.innerHTML},G=T.entities;export{U as Event,_ as Router,B as Render,G as Entities};