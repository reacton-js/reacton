/**
* Reacton v4.0.0
* (c) 2022-2024 | github.com/reacton-js
* Released under the MIT License.
**/
let l=/[A-Z]/g,r=/:(\w+)/g,c=/{{([^{}]*?)}}/,o=/\.\w+$/,d=new WeakMap,h=(new DOMParser).parseFromString("","text/html"),n=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/"/g,"&quot;"],[/'/g,"&#39;"]],s="window,location,history,document,navigation,screen",a="$host,$shadow,$data,$state,$event,$router,$,$$,$entities";let i=["push","pop","shift","unshift","splice","sort","reverse","toString","add","set","delete","clear"].reduce((e,t)=>(e[t]=!0,e),{}),u=Object.getPrototypeOf(async function(){}).constructor,p=(e,t)=>(0<t?"-":"")+e,f=new DocumentFragment,m=new Set,g=Symbol(),y=Symbol(),v=Symbol(),w=Symbol(),b=Symbol(),$=Symbol(),S=Symbol(),E=Symbol(),x=Symbol(),e=Symbol(),L=Symbol(),T=Symbol(),M=Symbol();async function N(...e){for(let a of e){if(a instanceof HTMLTemplateElement){let t=a.content;var n=[...t.querySelectorAll("script")].map(e=>t.removeChild(e).innerHTML).join(""),n=await(n?new u(n)():null);if("function"!=typeof n){console.error(`Error: return value "${n}" is not a class`);continue}n.template=a.innerHTML,a=n}else if("function"!=typeof a){console.error(`Error: argument "${a}" is not a class or <template> element`);continue}n=a.name.replace(l,p).toLocaleLowerCase();let s=a.mode&&a.mode.toLocaleLowerCase();var t=a.extends&&a.extends.toLocaleLowerCase();let r=!!a.hasOwnProperty("serializable")&&a.serializable;var i=t?Object.getPrototypeOf(document.createElement(t)).constructor:HTMLElement;let o=a.alias;customElements.define(n,class extends i{constructor(){super(),m.add(this);var e=new a;let n=s?this.attachShadow({mode:s,serializable:r}):this;var t=(new DOMParser).parseFromString("","text/html").body,t={funs:new WeakMap,vals:new WeakMap,deps:new WeakMap,obrs:new WeakMap,nodes:[],target:e,root:n,temp:t},e=(d.set(this,t),new Proxy(A(e,t),{get:(e,t)=>t===x?n:t===b?o:(t in e?e:this)[t]}));Object.defineProperties(this,{$host:{value:this},$shadow:{value:this.shadowRoot},$data:{value:this.dataset},$state:{value:new Proxy(e,{get:(e,t)=>{if("closed"!==s)return e[t]},set:(e,t,n)=>{if("closed"===s)throw new Error("cannot change the state of a closed component");return e[t]=n,!0}})},[M]:{value:n===this}}),t.state=e}async connectedCallback(){var{root:e,temp:t,state:n}=d.get(this);"function"==typeof a.startConnect&&await a.startConnect.call(n),"string"==typeof a.template&&(t.innerHTML=a.template,P.call(this,t),e.append(...t.childNodes)),"function"==typeof a.connected&&a.connected.call(n),setTimeout(()=>{m.delete(this),0===m.size&&f.dispatchEvent(new CustomEvent("load"))},1)}disconnectedCallback(){"function"==typeof a.disconnected&&a.disconnected.call(d.get(this).state)}adoptedCallback(){"function"==typeof a.adopted&&a.adopted.call(d.get(this).state)}attributeChangedCallback(e,t,n){"function"==typeof a.changed&&null!==t&&a.changed.call(d.get(this).state,e,t,n)}static get observedAttributes(){if(Array.isArray(a.attributes))return a.attributes}get $event(){return N.event}get $router(){return N.router}get[L](){return!0}$(e){return(this[x]||this.$shadow||this).querySelector(e)}$$(e){return(this[x]||this.$shadow||this).querySelectorAll(e)}$entities(...e){return N.entities(...e)}},t?{extends:t}:null)}}function P(e){if(8===e.nodeType)return e.remove();if(3===e.nodeType){var t=c.exec(e.data);t&&(0===t.index?(e.splitText(t[0].length),{state:s,funs:n,nodes:r}=d.get(this),s=C(s,t[1].trim()),n.set(e,s),r.push(e),e.data=s(),r.pop()):e.splitText(t.index))}else{if(2===e.nodeType&&(":"===e.nodeName[0]||"@"===e.nodeName[0])){var n=e.ownerElement,s=e.nodeName.slice(1),{state:r,funs:t,nodes:o}=d.get(this),r=C(r,e.value.trim());if(":"===e.nodeName[0])if("boolean"==typeof n[s]){var a={[$]:n,name:s};t.set(a,r),o.push(a),r()&&(n[s]=!0),o.pop();let e=n[S];e||(e=new Set,Object.defineProperty(n,S,{value:e})),e.add(a)}else{n.setAttribute(s,"");a=n.attributes[s];t.set(a,r),o.push(a),a.value=r(),o.pop()}else{t=s.split("."),a=t.slice(1).reduce((e,t)=>(e[t]=!0,e),{});n.addEventListener(t[0],r,a)}return n.removeAttribute(e.nodeName)}if(e.attributes)for(var i=0;i<e.attributes.length;i++)P.call(this,e.attributes[i])||i--;for(i=0;i<e.childNodes.length;i++)P.call(this,e.childNodes[i])||i--}return!0}let C=(t,e,n=t[e])=>"function"==typeof n?e=>n.call(t,e):Function(s,`const{${a}}=this${t[b]?","+t[b]+"=this\n":"\nwith($host)with(this)"}return event=>{'use strict'
return ${e}}`).call(t),A=(e,t,n)=>{n=new Proxy(e,new k(t,n));return t.obrs.set(e,n),n},O=(e,t,n)=>{for(var s of e)n&&n.push(s),s[$]?t.get(s)()?s[$][s.name]=!0:s[$][s.name]=!1:s.nodeValue=t.get(s)(),n&&n.pop()};class k{constructor(e,t){this[g]=e,this[v]=t}get(n,s){if(n.hasOwnProperty(s)||i[s]){if(this[e]=this[g].obrs.get(n[s]),this[e])return this[e];if(this[g].nodes.length&&(this[T]="object"==typeof n[s]&&null!==n[s],this[T]||n===this[g].target)){let e=this[g].deps.get(n),t;if(e||(e=i[s]?{[s]:null}:{},this[g].deps.set(n,e)),(t=(t=e[s])||(e[s]=new Set)).add(this[g].nodes[0]),this[T])return A(n[s],this[g],t)}if(i[s])return this[w]=n,new Proxy(n[s],this)}return n[s]}set(e,t,n){return this[E]=this[g].deps.get(e),this[E]=this[E]&&this[E][t]||this[v],this[E]?("object"==typeof e[t]&&null!==e[t]&&this[g].obrs.delete(e[t]),void 0===e[t]&&Array.isArray(e)?e.splice(t,0,n):e[t]=n,O(this[E],this[g].funs,this[g].nodes)):e[t]=n,!0}apply(e,t,n){var s;return"toString"===e.name?(s=this[w]instanceof Map?"Map":this[w]instanceof Set?"Set":"",JSON.stringify(s?{[s]:[...this[w]]}:t,null," ")):i[e.name]?(e.apply(this[w],n),this[v]&&O(this[v],this[g].funs,this[g].nodes),t):e.apply(t,n)}deleteProperty(e,t){var n;return this[E]=this[g].deps.get(e),this[E]=this[E]&&this[E][t]||this[v],this[E]?("object"==typeof e[t]&&null!==e[t]&&this[g].obrs.delete(e[t]),n=Array.isArray(e)?!!e.splice(t,1).length:!(e[t]=void 0),O(this[E],this[g].funs,this[g].nodes),n):delete e[t]}}function j(e,t,n){var s,r,o=e[y].regs,a=t.replace(location.origin,"");for([s,r]of o){var i,l=s.exec(a);l&&((i=new CustomEvent(r,{detail:n})).url=new URL(t),i.params=l.groups,i.search=i.url.searchParams,e.dispatchEvent(i))}}N.entities=function(e,...t){return(t.length?[...n,...t]:n).reduce((e,t)=>e.replace(...t),e)};export default N;var t=N.event=function(e,t,n=null){if(new.target)return new DocumentFragment;e.dispatchEvent(new CustomEvent(t,{detail:n}))},D=N.router=function(e,t,n=null){if(new.target){let t={},n=new Map,s=new class extends DocumentFragment{addEventListener(...e){n.set(new RegExp(`^/?${e[0].replace(r,(e,t)=>`(?<${t}>\\w+)`)}/?$`),e[0]),document.addEventListener.call(this,...e)}};return s[y]={idx:0,vals:t,regs:n},window.addEventListener("popstate",e=>{j(s,location.href,t[e.state])}),s}var s;t&&t.startsWith(location.origin)&&!o.test(t)&&(s=e[y],history.pushState(s.idx,"",t),j(e,t,s.vals[s.idx++]=n))},F=N.render=async function({parent:e=document.children[0],slots:t=!1,clean:n=!0}={}){await new Promise(e=>f.addEventListener("load",e));var s=document.createElement("template");return function e(t,n,s,r){if(r&&("STYLE"===t.nodeName||"SCRIPT"===t.nodeName||"TEMPLATE"===t.nodeName||8===t.nodeType))return;let o;if("SLOT"!==t.nodeName||s)if(t[L]){o=h.createElement(t.nodeName);for(var a of t.attributes)o.setAttribute(a.name,a.value);t[M]||(t=d.get(t).root)}else o=t.cloneNode(!1);else o=new DocumentFragment;let i=t.assignedNodes?t.assignedNodes({flatten:!1}):(t.content||t).childNodes;if(i)for(var l=0;l<i.length;l++)e(i[l],o.content||o,s,r);n.append(o)}(e,s.content,t,n),e===document.children[0]?`<!DOCTYPE html>
`+s.innerHTML:s.innerHTML},H=N.entities;export{t as Event,D as Router,F as Render,H as Entities};