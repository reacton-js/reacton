/**
* Reacton v4.0.3
* (c) 2022-2024 | github.com/reacton-js
* Released under the MIT License.
**/
let o=/\.\w+$/,d=/[A-Z]/g,s=/:(\w+)/g,b=/{{([^{}]*?)}}/,t=/('|"|`)[^]*?\1/g,F=/;|\bof\b|\bin\b/,H=/\b[A-Za-z_]\w*?\b/g,c=new WeakMap,W=(new DOMParser).parseFromString("","text/html"),z="window,location,history,document,navigation,screen",q="$host,$shadow,$data,$state,$event,$router,$,$$,$entities",y=e=>e.replace(t,"").split(F)[0].match(H).join(),n=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/"/g,"&quot;"],[/'/g,"&#39;"]];let a=["push","pop","shift","unshift","splice","sort","reverse","toString","add","set","delete","clear"].reduce((e,t)=>(e[t]=!0,e),{}),R=Object.getPrototypeOf(async function(){}).constructor,V=(e,t)=>(0<t?"-":"")+e,u=new DocumentFragment,h=new Set,i=Symbol(),f=Symbol(),l=Symbol(),p=Symbol(),m=Symbol(),w=Symbol(),$=Symbol(),r=Symbol(),g=Symbol(),e=Symbol(),v=Symbol(),N=Symbol(),S=Symbol(),x=Symbol(),E=Symbol(),Y={childList:!0,subtree:!0};async function L(...e){for(let i of e){if(i instanceof HTMLTemplateElement){let t=i.content;var n=[...t.querySelectorAll("script")].map(e=>t.removeChild(e).innerHTML).join(""),n=await(n?new R(n)():null);if("function"!=typeof n){console.error(`Error: return value "${n}" is not a class`);continue}n.template=i.innerHTML,i=n}else if("function"!=typeof i){console.error(`Error: argument "${i}" is not a class or <template> element`);continue}n=i.name.replace(d,V).toLocaleLowerCase();let r=i.mode&&i.mode.toLocaleLowerCase();var t=i.extends&&i.extends.toLocaleLowerCase();let o=!!i.hasOwnProperty("serializable")&&i.serializable;var l=t?Object.getPrototypeOf(document.createElement(t)).constructor:HTMLElement;let s=i.alias,a=i.time;customElements.define(n,class extends l{constructor(){super(),h.add(this);var e=new i;let n=r?this.attachShadow({mode:r,serializable:o}):this;var t=(new DOMParser).parseFromString("","text/html").body,t={funs:new WeakMap,deps:new WeakMap,obrs:new WeakMap,bools:new WeakMap,exec:null,nodes:[],target:e,root:n,temp:t,time:a},e=(c.set(this,t),new Proxy(j(e,t),{get:(e,t)=>t===g?n:t===m?s:(t in e?e:this)[t]}));Object.defineProperties(this,{$host:{value:this},$shadow:{value:this.shadowRoot},$data:{value:this.dataset},$state:{value:new Proxy(e,{get:(e,t)=>{if("closed"!==r)return e[t]},set:(e,t,n)=>{if("closed"===r)throw new Error("cannot change the state of a closed component");return e[t]=n,!0}})},[N]:{value:n===this}}),t.state=e}async connectedCallback(){let e=c.get(this),{funs:r,bools:o,root:t,temp:n,state:s}=e;"function"==typeof i.startConnect&&await i.startConnect.call(s),"string"==typeof i.template&&(n.innerHTML=i.template,T(e,n),t.append(...n.childNodes),new MutationObserver(e=>{for(var t of e)for(var n of t.removedNodes)M(n,r,o)}).observe(t,Y)),"function"==typeof i.connected&&i.connected.call(s),setTimeout(()=>{h.delete(this),0===h.size&&u.dispatchEvent(new CustomEvent("load"))},1)}disconnectedCallback(){"function"==typeof i.disconnected&&i.disconnected.call(c.get(this).state)}adoptedCallback(){"function"==typeof i.adopted&&i.adopted.call(c.get(this).state)}attributeChangedCallback(e,t,n){"function"==typeof i.changed&&null!==t&&i.changed.call(c.get(this).state,e,t,n)}static get observedAttributes(){if(Array.isArray(i.attributes))return i.attributes}get $event(){return L.event}get $router(){return L.router}get[v](){return!0}$(e){return(this[g]||this.$shadow||this).querySelector(e)}$$(e){return(this[g]||this.$shadow||this).querySelectorAll(e)}$entities(...e){return L.entities(...e)}},t?{extends:t}:null)}}let T=(e,t,n)=>{if(8===t.nodeType)return t.remove();if(3===t.nodeType){var r=b.exec(t.data);r&&(0===r.index?(t.splitText(r[0].length),{state:o,funs:a,exec:i,nodes:l}=e,i=i?i.call(o,r[1].trim()):C(o,r[1].trim()),a.set(t,i),l.push(t),n?(t[S]=!0,t.data="",i()):t.data=i(),l.pop()):t.splitText(r.index))}else{if(2===t.nodeType&&(":"===t.nodeName[0]||"@"===t.nodeName[0]||"$for"===t.nodeName)){var{state:o,funs:s,bools:a,exec:i,nodes:l}=e,d=t.ownerElement,r=t.nodeName.slice(1);if("$"===t.nodeName[0]){var c=t.value.trim(),u=Z(o,c,i),h=n?n+(","+y(c)):y(c),c=e.exec;e.exec=u.next().value;for(var f=0;f<d.childNodes.length;f++)T(e,d.childNodes[f],h)||f--;e.exec=c;var p=new DocumentFragment,c=(p.append(...d.childNodes),{iter:u,frag:p,wrap:{childNodes:[]},len:p.childNodes.length});if(s.set(d,c),l.push(d),n)d[E]=!0;else for(;!u.next().value;)d.append(O(s,p.cloneNode(!0),p));l.pop()}else{c=i?i.call(o,t.value.trim()):C(o,t.value.trim());if(":"===t.nodeName[0]){if("is"!==r){if("boolean"==typeof d[r]){let e,t={[$]:d,name:r};s.set(t,c),l.push(t),n?((e=d[w])||(e=new Set,d[w]=e),c()):((e=a.get(d))||(e=new Set,a.set(d,e)),c()&&(d[r]=!0)),e.add(t)}else{d.setAttribute(r,"");i=d.attributes[r];s.set(i,c),l.push(i),n?(i[S]=!0,i.value="",c()):i.value=c()}l.pop()}}else{o=r.split("."),a=o.slice(1).reduce((e,t)=>(e[t]=!0,e),{});d.addEventListener(o[0],c,a)}}return d.removeAttribute(t.nodeName)}if(t.attributes)for(var f=0,m=t.attributes,g=m.$for;f<m.length;f++)T(e,m[f],n)||f--;if(!g)for(var f=0,v=t.childNodes;f<v.length;f++)T(e,v[f],n)||f--}return t},M=(e,t,n)=>{if(t.delete(e),1===e.nodeType){var r=n.get(e);if(r){for(var o of r)t.delete(o);r.clear(),n.delete(e)}}if(e.attributes)for(var s=0;s<e.attributes.length;s++)M(e.attributes[s],t);for(s=0;s<e.childNodes.length;s++)M(e.childNodes[s],t,n)},C=(t,n)=>"function"==typeof t[n]?e=>t[n].call(t,e):Function(z,`const {${q}} = this${t[m]?`,${t[m]} = this
`:"\nwith ($host) with (this)"} return event => {'use strict'
return ${n}}`).call(t),P=e=>`(function*(){ yield function(){ return eval('event => ' + arguments[0]) }
while (true){ for (var ${e}) yield; yield true }})`,Z=(e,t,n)=>(n?n.call(e,P(t)):C(e,P(t)))().call(e),A=(e,t,n)=>{let r=0,{iter:o,frag:s,wrap:a,len:i}=n,l=t.childNodes;for(;!o.next().value;){if(l[r]){for(var d=0;d<i;d++)a.childNodes[d]=l[d+r];O(e,a,s)}else t.append(O(e,s.cloneNode(!0),s));r+=i}if(r<l.length)for(d=l.length;d>r;d--)t.lastChild.remove();a.childNodes.length=0},O=(e,t,n)=>{if(n[S])t.nodeValue=e.get(n)();else{if(n.attributes){for(var r=0;r<n.attributes.length;r++)O(e,t.attributes[r],n.attributes[r]);if(n[w])for(var o of n[w])t[o.name]=!!e.get(o)()}if(n[E])A(e,t,e.get(n));else for(r=0;r<n.childNodes.length;r++)O(e,t.childNodes[r],n.childNodes[r])}return t},k=(e,{funs:t,nodes:n,time:r})=>{var o,s;r&&(o=performance.now());for(s of e){var a=t.get(s);a?(n&&n.push(s),1===s.nodeType?A(t,s,a):s[$]?s[$][s.name]=!!a():s.nodeValue=a(),n&&n.pop()):e.delete(s)}r&&console.log(performance.now()-o+" ms")},j=(e,t,n)=>{n=new Proxy(e,new I(t,n));return t.obrs.set(e,n),n};class I{constructor(e,t){this[i]=e,this[l]=t}get(n,r){if(n.hasOwnProperty(r)||a[r]){if(this[e]=this[i].obrs.get(n[r]),this[e])return this[e];if(this[i].nodes.length&&((this[x]="object"==typeof n[r]&&null!==n[r])||n===this[i].target)){let e,t=this[i].deps.get(n);if(t||(t=a[r]?{[r]:null}:{},this[i].deps.set(n,t)),(e=(e=t[r])||(t[r]=new Set)).add(this[i].nodes[0]),this[x])return j(n[r],this[i],e)}if(a[r])return this[p]=n,new Proxy(n[r],this)}return n[r]}set(e,t,n){return this[r]=this[i].deps.get(e),(this[r]=this[r]&&this[r][t]||this[l])?("object"==typeof e[t]&&null!==e[t]&&this[i].obrs.delete(e[t]),void 0===e[t]&&Array.isArray(e)?e.splice(t,0,n):e[t]=n,this[i].nodes.length||k(this[r],this[i])):e[t]=n,!0}apply(e,t,n){var r;return"toString"===e.name?(r=this[p]instanceof Map?"Map":this[p]instanceof Set?"Set":"",JSON.stringify(r?{[r]:[...this[p]]}:t,null," ")):a[e.name]?(e.apply(this[p],n),this[l]&&!this[i].nodes.length&&k(this[l],this[i]),t):e.apply(t,n)}deleteProperty(e,t){var n;return this[r]=this[i].deps.get(e),(this[r]=this[r]&&this[r][t]||this[l])?("object"==typeof e[t]&&null!==e[t]&&this[i].obrs.delete(e[t]),n=Array.isArray(e)?!!e.splice(t,1).length:!(e[t]=void 0),this[i].nodes.length||k(this[r],this[i]),n):delete e[t]}}function D(e,t,n){var r,o,s=e[f].regs,a=t.replace(location.origin,"");for([r,o]of s){var i,l=r.exec(a);l&&((i=new CustomEvent(o,{detail:n})).url=new URL(t),i.params=l.groups,i.search=i.url.searchParams,e.dispatchEvent(i))}}L.entities=function(e,...t){return(t.length?[...n,...t]:n).reduce((e,t)=>e.replace(...t),e)};export default L;var J=L.event=function(e,t,n=null){if(new.target)return new DocumentFragment;e.dispatchEvent(new CustomEvent(t,{detail:n}))},U=L.router=function(e,t,n=null){if(new.target){let t={},n=new Map,r=new class extends DocumentFragment{addEventListener(...e){n.set(new RegExp(`^/?${e[0].replace(s,(e,t)=>`(?<${t}>\\w+)`)}/?$`),e[0]),document.addEventListener.call(this,...e)}};return r[f]={idx:0,vals:t,regs:n},window.addEventListener("popstate",e=>{D(r,location.href,t[e.state])}),r}var r;t&&t.startsWith(location.origin)&&!o.test(t)&&(r=e[f],history.pushState(r.idx,"",t),D(e,t,r.vals[r.idx++]=n))},_=L.render=async function({parent:e=document.children[0],slots:t=!1,clean:n=!0}={}){await new Promise(e=>u.addEventListener("load",e));var r=document.createElement("template");return function e(t,n,r,o){if(o&&("STYLE"===t.nodeName||"SCRIPT"===t.nodeName||"TEMPLATE"===t.nodeName||8===t.nodeType))return;let s;if("SLOT"!==t.nodeName||r)if(t[v]){s=W.createElement(t.nodeName);for(var a of t.attributes)s.setAttribute(a.name,a.value);t[N]||(t=c.get(t).root)}else s=t.cloneNode(!1);else s=new DocumentFragment;let i=t.assignedNodes?t.assignedNodes({flatten:!1}):(t.content||t).childNodes;if(i)for(var l=0;l<i.length;l++)e(i[l],s.content||s,r,o);n.append(s)}(e,r.content,t,n),e===document.children[0]?`<!DOCTYPE html>
`+r.innerHTML:r.innerHTML},B=L.entities;export{J as Event,U as Router,_ as Render,B as Entities};