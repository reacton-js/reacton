/**
* Reacton v4.0.2
* (c) 2022-2024 | github.com/reacton-js
* Released under the MIT License.
**/
let l=/[A-Z]/g,r=/:(\w+)/g,d=/{{([^{}]*?)}}/,o=/\.\w+$/,c=new WeakMap,h=(new DOMParser).parseFromString("","text/html"),n=[[/&/g,"&amp;"],[/</g,"&lt;"],[/>/g,"&gt;"],[/"/g,"&quot;"],[/'/g,"&#39;"]],s="window,location,history,document,navigation,screen",i="$host,$shadow,$data,$state,$event,$router,$,$$,$entities";let a=["push","pop","shift","unshift","splice","sort","reverse","toString","add","set","delete","clear"].reduce((e,t)=>(e[t]=!0,e),{}),u=Object.getPrototypeOf(async function(){}).constructor,p=(e,t)=>(0<t?"-":"")+e,f=new DocumentFragment,m=new Set,g=Symbol(),v=Symbol(),y=Symbol(),w=Symbol(),b=Symbol(),$=Symbol(),S=Symbol(),E=Symbol(),x=Symbol(),e=Symbol(),L=Symbol(),T=Symbol(),N=Symbol(),M={childList:!0,subtree:!0};async function P(...e){for(let i of e){if(i instanceof HTMLTemplateElement){let t=i.content;var n=[...t.querySelectorAll("script")].map(e=>t.removeChild(e).innerHTML).join(""),n=await(n?new u(n)():null);if("function"!=typeof n){console.error(`Error: return value "${n}" is not a class`);continue}n.template=i.innerHTML,i=n}else if("function"!=typeof i){console.error(`Error: argument "${i}" is not a class or <template> element`);continue}n=i.name.replace(l,p).toLocaleLowerCase();let s=i.mode&&i.mode.toLocaleLowerCase();var t=i.extends&&i.extends.toLocaleLowerCase();let r=!!i.hasOwnProperty("serializable")&&i.serializable;var a=t?Object.getPrototypeOf(document.createElement(t)).constructor:HTMLElement;let o=i.alias;customElements.define(n,class extends a{constructor(){super(),m.add(this);var e=new i;let n=s?this.attachShadow({mode:s,serializable:r}):this;var t=(new DOMParser).parseFromString("","text/html").body,t={funs:new WeakMap,deps:new WeakMap,obrs:new WeakMap,nodes:[],target:e,root:n,temp:t},e=(c.set(this,t),new Proxy(j(e,t),{get:(e,t)=>t===x?n:t===b?o:(t in e?e:this)[t]}));Object.defineProperties(this,{$host:{value:this},$shadow:{value:this.shadowRoot},$data:{value:this.dataset},$state:{value:new Proxy(e,{get:(e,t)=>{if("closed"!==s)return e[t]},set:(e,t,n)=>{if("closed"===s)throw new Error("cannot change the state of a closed component");return e[t]=n,!0}})},[N]:{value:n===this}}),t.state=e}async connectedCallback(){let{funs:s,root:e,temp:t,state:n}=c.get(this);"function"==typeof i.startConnect&&await i.startConnect.call(n),"string"==typeof i.template&&(t.innerHTML=i.template,C.call(this,t),e.append(...t.childNodes),new MutationObserver(e=>{for(var t of e)for(var n of t.removedNodes)A(n,s)}).observe(e,M)),"function"==typeof i.connected&&i.connected.call(n),setTimeout(()=>{m.delete(this),0===m.size&&f.dispatchEvent(new CustomEvent("load"))},1)}disconnectedCallback(){"function"==typeof i.disconnected&&i.disconnected.call(c.get(this).state)}adoptedCallback(){"function"==typeof i.adopted&&i.adopted.call(c.get(this).state)}attributeChangedCallback(e,t,n){"function"==typeof i.changed&&null!==t&&i.changed.call(c.get(this).state,e,t,n)}static get observedAttributes(){if(Array.isArray(i.attributes))return i.attributes}get $event(){return P.event}get $router(){return P.router}get[L](){return!0}$(e){return(this[x]||this.$shadow||this).querySelector(e)}$$(e){return(this[x]||this.$shadow||this).querySelectorAll(e)}$entities(...e){return P.entities(...e)}},t?{extends:t}:null)}}function C(e){if(8===e.nodeType)return e.remove();if(3===e.nodeType){var t=d.exec(e.data);t&&(0===t.index?(e.splitText(t[0].length),{state:s,funs:n,nodes:r}=c.get(this),s=O(s,t[1].trim()),n.set(e,s),r.push(e),e.data=s(),r.pop()):e.splitText(t.index))}else{if(2===e.nodeType&&(":"===e.nodeName[0]||"@"===e.nodeName[0])){var n=e.ownerElement,s=e.nodeName.slice(1),{state:r,funs:t,nodes:o}=c.get(this),r=O(r,e.value.trim());if(":"===e.nodeName[0])if("boolean"==typeof n[s]){var i={[$]:n,name:s};t.set(i,r),o.push(i),r()&&(n[s]=!0),o.pop();let e=n[S];e||(e=new Set,Object.defineProperty(n,S,{value:e})),e.add(i)}else{n.setAttribute(s,"");i=n.attributes[s];t.set(i,r),o.push(i),i.value=r(),o.pop()}else{t=s.split("."),i=t.slice(1).reduce((e,t)=>(e[t]=!0,e),{});n.addEventListener(t[0],r,i)}return n.removeAttribute(e.nodeName)}if(e.attributes)for(var a=0;a<e.attributes.length;a++)C.call(this,e.attributes[a])||a--;for(a=0;a<e.childNodes.length;a++)C.call(this,e.childNodes[a])||a--}return!0}let A=(e,t)=>{if(1===e.nodeType){var n=e[S];if(n){for(var s of n)t.delete(s);n.clear()}}else t.delete(e);if(e.attributes)for(var r=0;r<e.attributes.length;r++)A(e.attributes[r],t);for(r=0;r<e.childNodes.length;r++)A(e.childNodes[r],t)},O=(t,e,n=t[e])=>"function"==typeof n?e=>n.call(t,e):Function(s,`const{${i}}=this${t[b]?","+t[b]+"=this\n":"\nwith($host)with(this)"}return event=>{'use strict'
return ${e}}`).call(t),j=(e,t,n)=>{n=new Proxy(e,new D(t,n));return t.obrs.set(e,n),n},k=(e,t,n)=>{var s,r;for(r of e)(s=t.get(r))?(n&&n.push(r),r[$]?s()?r[$][r.name]=!0:r[$][r.name]=!1:r.nodeValue=s(),n&&n.pop()):e.delete(r)};class D{constructor(e,t){this[g]=e,this[y]=t}get(n,s){if(n.hasOwnProperty(s)||a[s]){if(this[e]=this[g].obrs.get(n[s]),this[e])return this[e];if(this[g].nodes.length&&(this[T]="object"==typeof n[s]&&null!==n[s],this[T]||n===this[g].target)){let e=this[g].deps.get(n),t;if(e||(e=a[s]?{[s]:null}:{},this[g].deps.set(n,e)),(t=(t=e[s])||(e[s]=new Set)).add(this[g].nodes[0]),this[T])return j(n[s],this[g],t)}if(a[s])return this[w]=n,new Proxy(n[s],this)}return n[s]}set(e,t,n){return this[E]=this[g].deps.get(e),this[E]=this[E]&&this[E][t]||this[y],this[E]?("object"==typeof e[t]&&null!==e[t]&&this[g].obrs.delete(e[t]),void 0===e[t]&&Array.isArray(e)?e.splice(t,0,n):e[t]=n,this[g].nodes.length||k(this[E],this[g].funs,this[g].nodes)):e[t]=n,!0}apply(e,t,n){var s;return"toString"===e.name?(s=this[w]instanceof Map?"Map":this[w]instanceof Set?"Set":"",JSON.stringify(s?{[s]:[...this[w]]}:t,null," ")):a[e.name]?(e.apply(this[w],n),this[y]&&!this[g].nodes.length&&k(this[y],this[g].funs,this[g].nodes),t):e.apply(t,n)}deleteProperty(e,t){var n;return this[E]=this[g].deps.get(e),this[E]=this[E]&&this[E][t]||this[y],this[E]?("object"==typeof e[t]&&null!==e[t]&&this[g].obrs.delete(e[t]),n=Array.isArray(e)?!!e.splice(t,1).length:!(e[t]=void 0),this[g].nodes.length||k(this[E],this[g].funs,this[g].nodes),n):delete e[t]}}function F(e,t,n){var s,r,o=e[v].regs,i=t.replace(location.origin,"");for([s,r]of o){var a,l=s.exec(i);l&&((a=new CustomEvent(r,{detail:n})).url=new URL(t),a.params=l.groups,a.search=a.url.searchParams,e.dispatchEvent(a))}}P.entities=function(e,...t){return(t.length?[...n,...t]:n).reduce((e,t)=>e.replace(...t),e)};export default P;var t=P.event=function(e,t,n=null){if(new.target)return new DocumentFragment;e.dispatchEvent(new CustomEvent(t,{detail:n}))},H=P.router=function(e,t,n=null){if(new.target){let t={},n=new Map,s=new class extends DocumentFragment{addEventListener(...e){n.set(new RegExp(`^/?${e[0].replace(r,(e,t)=>`(?<${t}>\\w+)`)}/?$`),e[0]),document.addEventListener.call(this,...e)}};return s[v]={idx:0,vals:t,regs:n},window.addEventListener("popstate",e=>{F(s,location.href,t[e.state])}),s}var s;t&&t.startsWith(location.origin)&&!o.test(t)&&(s=e[v],history.pushState(s.idx,"",t),F(e,t,s.vals[s.idx++]=n))},W=P.render=async function({parent:e=document.children[0],slots:t=!1,clean:n=!0}={}){await new Promise(e=>f.addEventListener("load",e));var s=document.createElement("template");return function e(t,n,s,r){if(r&&("STYLE"===t.nodeName||"SCRIPT"===t.nodeName||"TEMPLATE"===t.nodeName||8===t.nodeType))return;let o;if("SLOT"!==t.nodeName||s)if(t[L]){o=h.createElement(t.nodeName);for(var i of t.attributes)o.setAttribute(i.name,i.value);t[N]||(t=c.get(t).root)}else o=t.cloneNode(!1);else o=new DocumentFragment;let a=t.assignedNodes?t.assignedNodes({flatten:!1}):(t.content||t).childNodes;if(a)for(var l=0;l<a.length;l++)e(a[l],o.content||o,s,r);n.append(o)}(e,s.content,t,n),e===document.children[0]?`<!DOCTYPE html>
`+s.innerHTML:s.innerHTML},q=P.entities;export{t as Event,H as Router,W as Render,q as Entities};