/*!
 * Reacton.js v3.0.0
 * (c) 2022-2023 | github.com/reacton-js
 * Released under the MIT License.
 */
"use strict";!function(){const s=/[A-Z]/g,f=new WeakMap,i=document.implementation.createHTMLDocument(),m={get(e,t){return e.hasOwnProperty(t)?e[t].value:e[t]},set(e,t,n){return e[t].value=n,!0}},p=Symbol(),g=new Set,w=new A,o=new CustomEvent("init",{bubbles:!0,composed:!0});function a(h){const u=(h.mode||"").toLowerCase();var e=(h.extends||"").toLowerCase(),t=h.name.replace(s,(e,t)=>(0<t?"-":"")+e.toLowerCase()),n=e?Object.getPrototypeOf(document.createElement(e)).constructor:HTMLElement;customElements.define(t,class extends n{constructor(){super(),g.add(this);const e=u?this.attachShadow({mode:u}):this;var t=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap;const a=new Proxy(this.attributes,m),i={},r=new Proxy(new h,{get:(e,t,n)=>{return t===p?this:e.hasOwnProperty(t)?(c.node&&(i[t]||(i[t]=new Set),i[t].add(c.node)),d._nodes=i[t],c.obsers.has(e[t])?c.obsers.get(e[t]):e[t]&&"object"==typeof e[t]?v.call(this,e[t],d):e[t]):(e=e.__proto__||Object.getPrototypeOf(e),"symbol"==typeof t||t in e?Reflect.get(e,t,n):this[t])},set:(e,t,n,s)=>!!Reflect.set(e,t,n,s)&&(i[t]&&_.call(this,i[t],h),!0)});Object.defineProperties(this,{$state:{get(){if("closed"!==u)return r}},$props:{get(){if("closed"!==u)return a}},$host:{get(){if("closed"!==u)return e.host}},$light:{value:e===this||!1},$shadow:{value:this.shadowRoot},$event:{value:A},$route:{value:L}});var l=function(){return new Function(`{ ${y} } = this`,"return function() { with (this) return eval(arguments[0]) }").call(this).bind(this.$state)}.call(this);const c={root:e,funcs:t,obsers:n,bools:s,events:o,state:r,exec:l},d=(f.set(this,c),new b(h,n));(d[p]=this).addEventListener("init",e=>{g.delete(e.detail),0===g.size&&(e.stopPropagation(),A(w,"ok"))})}async connectedCallback(){var e=f.get(this),t=document.createElement("template");"string"==typeof h.template||void 0===h.template?t.innerHTML=h.template||"":"function"==typeof h.template?t.innerHTML=await h.template.call(e.state)||"":h.template instanceof DocumentFragment&&t.content.append(h.template.cloneNode(!0)),N.call(this,t.content),e.root.append(t.content),await(!h.connected||h.connected.call(e.state)),setTimeout(()=>{(o.detail=this).dispatchEvent(o)},0)}async disconnectedCallback(){await(!h.disconnected||h.disconnected.call(f.get(this).state))}async adoptedCallback(){await(!h.adopted||h.adopted.call(f.get(this).state))}async attributeChangedCallback(...e){await(!h.changed||h.changed.apply(f.get(this).state,e))}static get observedAttributes(){if(Array.isArray(h.attributes))return h.attributes}$(e){return"closed"!==u||this[p]?f.get(this[p]||this).root.querySelector(e):null}$$(e){return"closed"!==u||this[p]?f.get(this[p]||this).root.querySelectorAll(e):null}},e?{extends:e}:null)}Object.defineProperty(o,"detail",{writable:!0});const r=new Set(["push","pop","shift","unshift","splice","sort","reverse"]);class b{constructor(e,t){this._init=e,this._obsers=t}deleteProperty(e,t){return Array.isArray(e)?e.splice(t,1):delete e[t],this._nodes&&_.call(this[p],this._nodes,this._init),!0}apply(e,t,n){return"toString"===e.name?JSON.stringify(t,null," "):r.has(e.name)?(e.apply(this._target,n),this._nodes&&_.call(this[p],this._nodes,this._init),t):e.apply(t,n)}get(e,t,n){this._target=e;n=Reflect.get(e,t,n);return this._obsers.has(n)?this._obsers.get(n):e.hasOwnProperty(t)?n&&"object"==typeof n?v.call(this[p],n,this):n:"toString"===t||Array.isArray(e)&&r.has(t)?v.call(this[p],n,this):n}set(e,t,n,s){return!!Reflect.set(e,t,n,s)&&(this._nodes&&_.call(this[p],this._nodes,this._init),!0)}}function v(e,t){t=new Proxy(e,t);return f.get(this).obsers.set(e,t),t}const d=/(['"`])[^]*?\1/,h=/;|\b(?:of)|(?:in)\b/,u=/\b[A-Za-z_]\w*?\b/g;const y="$state, $props, $host, $light, $shadow, $event, $route, $, $$";const e=/{{([^{}]*?)}}/;function N(t,n){if(8===t.nodeType)return t.remove();if(3===t.nodeType)t.data.trim()?(i=e.exec(t.data))&&(0===i.index?(s=(a=f.get(this)).exec("() => "+i[1]),t.splitText(i[0].length),a.funcs.set(t,s),n||((a.node=t).data=s(),delete a.node)):t.splitText(i.index)):-1!==t.data.indexOf("\n")?t.data="\n":t.data.length&&(t.data=" ");else{if(":"===t.nodeName[0]||"$"===t.nodeName[0]){var s=f.get(this),o=t.ownerElement;if(o.removeAttribute(t.nodeName),"$for"===t.nodeName){n||(s.node=o);const l=new DocumentFragment;for(;o.firstChild;)l.append(o.firstChild);var a=s.exec(`(function*() { arguments[0] = yield function() { return eval(arguments[0]) }; while (true) { yield; for (var ${t.value}) arguments[0]() } })()`),i=a.next().value.bind(this.$state);a.next(()=>function(t,n){if(n.owner.childNodes[n.index])for(let e=0;e<n.length;e++)$.call(this,n.owner.childNodes[n.index+e],t.childNodes[e]);else{var e=t.cloneNode(!0);$.call(this,e,t),n.owner.append(e)}n.index+=n.length}.call(this,l,c));let e=t.value.replace(d,"").split(h)[0].match(u).join();n&&(e+=","+n);var r=s.exec;s.exec=i,N.call(this,l,e),s.exec=r;const c={executor:i,iterator:a,length:l.childNodes.length};s.funcs.set(o,c),n||E.call(this,o,s.funcs.get(o))}else{r=t.nodeName.slice(1),i=document.createAttribute(r);if(n||(s.node=i),"on"===i.name.substring(0,2)){let e;n?(e=s.exec(`() => ((${n}) => () => ${t.nodeValue})(${n})`),s.funcs.set(i,e),o.setAttributeNode(i),e._on=r):(e=s.exec("() => "+t.value),o["on"+i.name.slice(2)]=e),o.hasAttribute(":is")&&(s.events.has(o)||s.events.set(o,{}),s.events.get(o)[r]=e)}else{a=s.exec("() => "+t.value);if(s.funcs.set(i,a),"boolean"==typeof o[r])n?(o.setAttributeNode(i),a._name=r):a()?o.setAttributeNode(i):o.removeAttribute(r),o.hasAttribute(":is")&&(s.bools.has(o)||s.bools.set(o,{}),s.bools.get(o)[r]=a),a._owner=o;else if(n||(i.value=a()),o.setAttributeNode(i),"is"===i.name)if(n){r=document.createElement("template");r.content.append(...o.childNodes),a._childs=r.content}else{for(let e=0;e<o.childNodes.length;e++)N.call(this,o.childNodes[e])||e--;a._childs=[...o.childNodes],E.call(this,i,s.funcs.get(i))}}}return n||delete s.node,null}if(t.attributes)for(let e=0;e<t.attributes.length;e++)N.call(this,t.attributes[e],n)||e--;for(let e=0;e<t.childNodes.length;e++)N.call(this,t.childNodes[e],n)||e--}return t}function _(e,t){const n=f.get(this);t.before&&t.before.call(n.state),e.forEach(e=>E.call(this,e,n.funcs.get(e))),t.after&&t.after.call(n.state)}const x=document.createElement("template");function E(t,e,n){if(e._on)t[e._on]=e();else if(e.iterator){var s=f.get(this),o=s.exec,a=(s.exec=e.executor,e.index=0,e.owner=t,e.iterator.next(),e.index);for(let e=t.childNodes.length;e>a;e--)t.lastChild.remove();s.exec=o}else if("is"===t.name){for(var s=e(),i=(t.value=s,t.ownerElement),r=(x.innerHTML=`<${i.nodeName} is="${s}" />`,x.content.firstElementChild);i.attributes.length;)r.setAttributeNode(i.removeAttributeNode(i.attributes[0]));var o=f.get(this),l=o.bools.get(i);if(l){for(const d in l)l[d]._owner=r;o.bools.delete(i),o.bools.set(r,l)}var c=o.events.get(n||i);if(c){for(const h in c)r[h]=n?c[h]():c[h];o.events.delete(i),o.events.set(r,c)}e._childs instanceof DocumentFragment?(s=e._childs.cloneNode(!0),N.call(this,s),r.append(s)):r.append(...e._childs),i.replaceWith(r)}else e._owner?e()?e._name?e._owner.setAttribute(e._name,""):e._owner.setAttributeNode(t):e._owner.removeAttribute(t.nodeName):t.nodeValue=e()}function $(t,n){var e,s=f.get(this).funcs.get(n);if(s&&(s._on&&t.ownerElement?((e=t.ownerElement).removeAttribute(s._on),t=e):s._owner&&(s._owner=t.ownerElement||t),E.call(this,t,s,n.ownerElement)),n.attributes)for(var o of n.attributes)$.call(this,t.attributes[o.name]||t,o);for(let e=0;e<n.childNodes.length;e++)$.call(this,t.childNodes[e],n.childNodes[e])}function A(e,...t){if(new.target)return new DocumentFragment;e.dispatchEvent(new CustomEvent(...t))}const l=/:(\w+)/g,c=new WeakSet;function L(t,e,n=null){if(new.target){const s={};return new class extends DocumentFragment{addEventListener(...e){s[e[0]]=new RegExp(`^${e[0].replace(l,(e,t)=>`(?<${t}>\\w+)`)}/?$`),document.addEventListener.call(this,...e)}getEventRegs(){return s}}}c.has(t)||(c.add(t),window.addEventListener("popstate",e=>{T(t,location.href.replace(location.origin,""),e.state)})),e&&(e=e.replace(location.origin,""),history.pushState(n,"",e),T(t,e,n))}function T(e,t,n){var s=e.getEventRegs();for(const i in s){var o,a=s[i].exec(t);a&&((o=new CustomEvent(i)).url=new URL(location.href),o.params=a.groups,e.dispatchEvent(o,n))}}function C(e,n,s=0){if(C.clean&&("STYLE"===e.nodeName||"SCRIPT"===e.nodeName||"TEMPLATE"===e.nodeName||8===e.nodeType))return!1;let t,o;if(e.$state){t=i.createElement(e.nodeName);for(const a of e.attributes)t.setAttribute(a.name,a.value)}else t=e.cloneNode(!1);n.append(t),"SLOT"===t.nodeName?(o=e.assignedNodes({flatten:!0}),C.slots.push(t)):o=(e.$shadow||e).childNodes;for(let e=0,t=0;e<o.length;e++,t++)C(o[e],n.childNodes[s],t)||t--;return!0}function t(e){if("string"==typeof e&&((n=document.createElement("template")).innerHTML=e,t=n.content.children[0],n.classList.add(t.nodeName.toLowerCase()),t.replaceWith(...t.childNodes),e=n),e instanceof HTMLTemplateElement){const s=e.content;var t=[...s.querySelectorAll("script")].map(e=>s.removeChild(e).innerHTML).join(""),n=new Function("exports",t+`
 return exports`)()||class{};Object.defineProperties(n,{name:{value:e.classList[0]},template:{value:s}}),a(n)}else"function"==typeof e&&a(e)}window.Reacton=(...e)=>e.forEach(t),window.Reacton.event=A,window.Reacton.route=L,window.Reacton.ssr=function({node:n,slots:s,clean:o=!0}={}){return new Promise(t=>w.addEventListener("ok",()=>{var e=document.createElement("template");C.clean=o,C.slots=[],C(n||document.children[0],e.content),s||C.slots.forEach(e=>e.replaceWith(...e.childNodes)),t(n?e.innerHTML:`<!DOCTYPE html>
`+e.innerHTML)}))}}();