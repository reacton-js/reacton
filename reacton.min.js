/*!
 * Reacton.js v3.3.0
 * (c) 2022-2023 | github.com/reacton-js
 * Released under the MIT License.
 */
"use strict";!function(){const s=/[A-Z]/g,u=new WeakMap,i=document.implementation.createHTMLDocument(),f={get(e,t){return e.hasOwnProperty(t)?e[t].value:e[t]},set(e,t,n){return e[t].value=n,!0}},m=Symbol(),p=new Set,g=new A,o=new CustomEvent("init",{bubbles:!0,composed:!0});function a(d){const h=(d.mode||"").toLowerCase();var e=(d.extends||"").toLowerCase(),t=d.name.replace(s,(e,t)=>(0<t?"-":"")+e.toLowerCase()),n=e?Object.getPrototypeOf(document.createElement(e)).constructor:HTMLElement;customElements.define(t,class extends n{constructor(){super(),p.add(this);const e=h?this.attachShadow({mode:h}):this;var t=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap;const a=new Proxy(this.attributes,f),i={},r=new Proxy(new d(a),{get:(e,t,n)=>{return t===m?this:e.hasOwnProperty(t)?(l.node&&(i[t]||(i[t]=new Set),i[t].add(l.node)),c._nodes=i[t],l.obsers.has(e[t])?l.obsers.get(e[t]):e[t]&&"object"==typeof e[t]?b.call(this,e[t],c):e[t]):(e=e.__proto__||Object.getPrototypeOf(e),"symbol"==typeof t||t in e?Reflect.get(e,t,n):this[t])},set:(e,t,n,s)=>!!Reflect.set(e,t,n,s)&&(i[t]&&_.call(this,i[t],d),!0)}),l=(Object.defineProperties(this,{$state:{get(){if("closed"!==h)return r}},$props:{get(){if("closed"!==h)return a}},$host:{get(){if("closed"!==h)return e.host}},$light:{value:e===this||!1},$shadow:{value:this.shadowRoot},$event:{value:A},$route:{value:L}}),{root:e,funcs:t,obsers:n,bools:s,events:o,state:r}),c=(u.set(this,l),l.exec=function(){return new Function(`{ ${y} } = this`,"return function() { with (this) return eval(arguments[0]) }").call(this).bind(u.get(this).state)}.call(this),new w(d,n));(c[m]=this).addEventListener("init",e=>{p.delete(e.detail),0===p.size&&(e.stopPropagation(),A(g,"ok"))})}async connectedCallback(){var e=u.get(this),t=document.createElement("template");"string"==typeof d.template||void 0===d.template?t.innerHTML=d.template||"":"function"==typeof d.template?t.innerHTML=await d.template.call(e.state)||"":d.template instanceof DocumentFragment&&t.content.append(d.template.cloneNode(!0)),N.call(this,t.content),e.root.append(t.content),await(!d.connected||d.connected.call(e.state)),setTimeout(()=>{(o.detail=this).dispatchEvent(o)},0)}async disconnectedCallback(){await(!d.disconnected||d.disconnected.call(u.get(this).state))}async adoptedCallback(){await(!d.adopted||d.adopted.call(u.get(this).state))}async attributeChangedCallback(...e){await(!d.changed||d.changed.apply(u.get(this).state,e))}static get observedAttributes(){if(Array.isArray(d.attributes))return d.attributes}$(e){return"closed"!==h||this[m]?u.get(this[m]||this).root.querySelector(e):null}$$(e){return"closed"!==h||this[m]?u.get(this[m]||this).root.querySelectorAll(e):null}$entities(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}},e?{extends:e}:null)}Object.defineProperty(o,"detail",{writable:!0});const r=new Set(["push","pop","shift","unshift","splice","sort","reverse"]);class w{constructor(e,t){this._init=e,this._obsers=t}deleteProperty(e,t){return Array.isArray(e)?e.splice(t,1):delete e[t],this._nodes&&_.call(this[m],this._nodes,this._init),!0}apply(e,t,n){return"toString"===e.name?JSON.stringify(t,null," "):r.has(e.name)?(e.apply(this._target,n),this._nodes&&_.call(this[m],this._nodes,this._init),t):e.apply(t,n)}get(e,t,n){this._target=e;n=Reflect.get(e,t,n);return this._obsers.has(n)?this._obsers.get(n):e.hasOwnProperty(t)?n&&"object"==typeof n?b.call(this[m],n,this):n:"toString"===t||Array.isArray(e)&&r.has(t)?b.call(this[m],n,this):n}set(e,t,n,s){return!!Reflect.set(e,t,n,s)&&(this._nodes&&_.call(this[m],this._nodes,this._init),!0)}}function b(e,t){t=new Proxy(e,t);return u.get(this).obsers.set(e,t),t}const d=/(['"`])[^]*?\1/,h=/;|\b(?:of)|(?:in)\b/,v=/\b[A-Za-z_]\w*?\b/g;const y="$state, $props, $host, $light, $shadow, $event, $route, $, $$";const e=/{{([^{}]*?)}}/;function N(n,s){if(8===n.nodeType)return n.remove();if(3===n.nodeType)n.data.trim()?(i=e.exec(n.data))&&(0===i.index?(o=(t=u.get(this)).exec("() => "+i[1]),n.splitText(i[0].length),t.funcs.set(n,o),s||((t.node=n).data=o(),delete t.node)):n.splitText(i.index)):-1!==n.data.indexOf("\n")?n.data="\n":n.data.length&&(n.data=" ");else{if(":"===n.nodeName[0]||"$"===n.nodeName[0]){var o=u.get(this),a=n.ownerElement;if(a.removeAttribute(n.nodeName),"$for"===n.nodeName){s||(o.node=a);const l=new DocumentFragment;for(;a.firstChild;)l.append(a.firstChild);var t=o.exec(`(function*() { arguments[0] = yield function() { return eval(arguments[0]) }; while (true) { yield; for (var ${n.value}) arguments[0]() } })()`),i=t.next().value.bind(this.$state);t.next(()=>function(t,n){if(n.owner.childNodes[n.index])for(let e=0;e<n.length;e++)$.call(this,n.owner.childNodes[n.index+e],t.childNodes[e]);else{var e=t.cloneNode(!0);$.call(this,e,t),n.owner.append(e)}n.index+=n.length}.call(this,l,c));let e=n.value.replace(d,"").split(h)[0].match(v).join();s&&(e+=","+s);var r=o.exec;o.exec=i,N.call(this,l,e),o.exec=r;const c={executor:i,iterator:t,length:l.childNodes.length};o.funcs.set(a,c),s||E.call(this,a,o.funcs.get(a))}else{r=n.nodeName.slice(1),i=document.createAttribute(r);if(s||(o.node=i),"on"===i.name.substring(0,2)){let e,t=n.value.trim();"function"==typeof this.$state[t]&&(t+="()"),s?(e=o.exec(`() => ((${s}) => () => ${t})(${s})`),o.funcs.set(i,e),a.setAttributeNode(i),e._on=r):(e=o.exec("() => "+t),a["on"+i.name.slice(2)]=e),a.hasAttribute(":is")&&(o.events.has(a)||o.events.set(a,{}),o.events.get(a)[r]=e)}else{t=o.exec("() => "+n.value);if(o.funcs.set(i,t),"boolean"==typeof a[r])s?(a.setAttributeNode(i),t._name=r):t()?a.setAttributeNode(i):a.removeAttribute(r),a.hasAttribute(":is")&&(o.bools.has(a)||o.bools.set(a,{}),o.bools.get(a)[r]=t),t._owner=a;else if(s||(i.value=t()),a.setAttributeNode(i),"is"===i.name)if(s){r=document.createElement("template");r.content.append(...a.childNodes),t._childs=r.content}else{for(let e=0;e<a.childNodes.length;e++)N.call(this,a.childNodes[e])||e--;t._childs=[...a.childNodes],E.call(this,i,o.funcs.get(i))}}}return s||delete o.node,null}if(n.attributes)for(let e=0;e<n.attributes.length;e++)N.call(this,n.attributes[e],s)||e--;for(let e=0;e<n.childNodes.length;e++)N.call(this,n.childNodes[e],s)||e--}return n}function _(e,t){const n=u.get(this);t.before&&t.before.call(n.state),e.forEach(e=>E.call(this,e,n.funcs.get(e))),t.after&&t.after.call(n.state)}const x=document.createElement("template");function E(t,e,n){if(e._on)t[e._on]=e();else if(e.iterator){var s=u.get(this),o=s.exec,a=(s.exec=e.executor,e.index=0,e.owner=t,e.iterator.next(),e.index);for(let e=t.childNodes.length;e>a;e--)t.lastChild.remove();s.exec=o}else if("is"===t.name){for(var s=e(),i=(t.value=s,t.ownerElement),r=(x.innerHTML=`<${i.nodeName} is="${s}" />`,x.content.firstElementChild);i.attributes.length;)r.setAttributeNode(i.removeAttributeNode(i.attributes[0]));var o=u.get(this),l=o.bools.get(i);if(l){for(const d in l)l[d]._owner=r;o.bools.delete(i),o.bools.set(r,l)}var c=o.events.get(n||i);if(c){for(const h in c)r[h]=n?c[h]():c[h];o.events.delete(i),o.events.set(r,c)}e._childs instanceof DocumentFragment?(s=e._childs.cloneNode(!0),N.call(this,s),r.append(s)):r.append(...e._childs),i.replaceWith(r)}else e._owner?e()?e._name?e._owner.setAttribute(e._name,""):e._owner.setAttributeNode(t):e._owner.removeAttribute(t.nodeName):t.nodeValue=e()}function $(t,n){var e,s=u.get(this).funcs.get(n);if(s&&(s._on&&t.ownerElement?((e=t.ownerElement).removeAttribute(s._on),t=e):s._owner&&(s._owner=t.ownerElement||t),E.call(this,t,s,n.ownerElement)),n.attributes)for(var o of n.attributes)$.call(this,t.attributes[o.name]||t,o);for(let e=0;e<n.childNodes.length;e++)$.call(this,t.childNodes[e],n.childNodes[e])}function A(e,...t){if(new.target)return new DocumentFragment;e.dispatchEvent(new CustomEvent(...t))}const l=/:(\w+)/g,c=new WeakSet;function L(t,e,n=null){if(new.target){const s={};return new class extends DocumentFragment{addEventListener(...e){s[e[0]]=new RegExp(`^${e[0].replace(l,(e,t)=>`(?<${t}>\\w+)`)}/?$`),document.addEventListener.call(this,...e)}getEventRegs(){return s}}}c.has(t)||(c.add(t),window.addEventListener("popstate",e=>{T(t,location.href.replace(location.origin,""),e.state)})),e&&(e=e.replace(location.origin,""),history.pushState(n,"",e),T(t,e,n))}function T(e,t,n){var s=e.getEventRegs();for(const i in s){var o,a=s[i].exec(t);a&&((o=new CustomEvent(i)).url=new URL(location.href),o.params=a.groups,e.dispatchEvent(o,n))}}function C(e,n,s=0){if(C.clean&&("STYLE"===e.nodeName||"SCRIPT"===e.nodeName||"TEMPLATE"===e.nodeName||8===e.nodeType))return!1;let t,o;if(e.$state){t=i.createElement(e.nodeName);for(const a of e.attributes)t.setAttribute(a.name,a.value)}else t=e.cloneNode(!1);n.append(t),"SLOT"===t.nodeName?(o=e.assignedNodes({flatten:!0}),C.slots.push(t)):o=(e.$shadow||e).childNodes;for(let e=0,t=0;e<o.length;e++,t++)C(o[e],n.childNodes[s],t)||t--;return!0}function t(e){if("string"==typeof e&&((n=document.createElement("template")).innerHTML=e,t=n.content.children[0],n.classList.add(t.nodeName.toLowerCase()),t.replaceWith(...t.childNodes),e=n),e instanceof HTMLTemplateElement){const s=e.content;var t=[...s.querySelectorAll("script")].map(e=>s.removeChild(e).innerHTML).join(""),n=new Function("exports",t+`
 return exports`)()||class{};Object.defineProperties(n,{name:{value:n.name&&"exports"!==n.name?n.name:e.classList[0]},template:{value:s}}),a(n)}else"function"==typeof e&&a(e)}window.Reacton=(...e)=>e.forEach(t),window.Reacton.event=A,window.Reacton.route=L,window.Reacton.ssr=function({node:n,slots:s,clean:o=!0}={}){return new Promise(t=>g.addEventListener("ok",()=>{var e=document.createElement("template");C.clean=o,C.slots=[],C(n||document.children[0],e.content),s||C.slots.forEach(e=>e.replaceWith(...e.childNodes)),t(n?e.innerHTML:`<!DOCTYPE html>
`+e.innerHTML)}))}}();